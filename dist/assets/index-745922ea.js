var ko=Object.defineProperty;var Po=(t,e,s)=>e in t?ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var X=(t,e,s)=>(Po(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $i(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const W={},At=[],Le=()=>{},Ao=()=>!1,Us=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ki=t=>t.startsWith("onUpdate:"),le=Object.assign,ji=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Io=Object.prototype.hasOwnProperty,V=(t,e)=>Io.call(t,e),N=Array.isArray,It=t=>Hs(t)==="[object Map]",rr=t=>Hs(t)==="[object Set]",B=t=>typeof t=="function",ne=t=>typeof t=="string",at=t=>typeof t=="symbol",ee=t=>t!==null&&typeof t=="object",or=t=>(ee(t)||B(t))&&B(t.then)&&B(t.catch),ar=Object.prototype.toString,Hs=t=>ar.call(t),Oo=t=>Hs(t).slice(8,-1),lr=t=>Hs(t)==="[object Object]",Wi=t=>ne(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Qt=$i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vs=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Ro=/-(\w)/g,Oe=Vs(t=>t.replace(Ro,(e,s)=>s?s.toUpperCase():"")),qo=/\B([A-Z])/g,lt=Vs(t=>t.replace(qo,"-$1").toLowerCase()),$s=Vs(t=>t.charAt(0).toUpperCase()+t.slice(1)),si=Vs(t=>t?`on${$s(t)}`:""),yt=(t,e)=>!Object.is(t,e),Cs=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},cr=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},Ei=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let vn;const Ks=()=>vn||(vn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gi(t){if(N(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=ne(i)?Bo(i):Gi(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(ne(t)||ee(t))return t}const Lo=/;(?![^(]*\))/g,Mo=/:([^]+)/,No=/\/\*[^]*?\*\//g;function Bo(t){const e={};return t.replace(No,"").split(Lo).forEach(s=>{if(s){const i=s.split(Mo);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function ns(t){let e="";if(ne(t))e=t;else if(N(t))for(let s=0;s<t.length;s++){const i=ns(t[s]);i&&(e+=i+" ")}else if(ee(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Do="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fo=$i(Do);function ur(t){return!!t||t===""}const hr=t=>!!(t&&t.__v_isRef===!0),Xt=t=>ne(t)?t:t==null?"":N(t)||ee(t)&&(t.toString===ar||!B(t.toString))?hr(t)?Xt(t.value):JSON.stringify(t,fr,2):String(t),fr=(t,e)=>hr(e)?fr(t,e.value):It(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],r)=>(s[ii(i,r)+" =>"]=n,s),{})}:rr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>ii(s))}:at(e)?ii(e):ee(e)&&!N(e)&&!lr(e)?String(e):e,ii=(t,e="")=>{var s;return at(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ce;class Uo{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ce,!e&&Ce&&(this.index=(Ce.scopes||(Ce.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ce;try{return Ce=this,e()}finally{Ce=s}}}on(){Ce=this}off(){Ce=this.parent}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ho(){return Ce}let Y;const ni=new WeakSet;class dr{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ce&&Ce.active&&Ce.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ni.has(this)&&(ni.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,yn(this),mr(this);const e=Y,s=Me;Y=this,Me=!0;try{return this.fn()}finally{br(this),Y=e,Me=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Qi(e);this.deps=this.depsTail=void 0,yn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ni.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ci(this)&&this.run()}get dirty(){return Ci(this)}}let pr=0,Jt,Zt;function gr(t,e=!1){if(t.flags|=8,e){t.next=Zt,Zt=t;return}t.next=Jt,Jt=t}function zi(){pr++}function Yi(){if(--pr>0)return;if(Zt){let e=Zt;for(Zt=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Jt;){let e=Jt;for(Jt=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function mr(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function br(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),Qi(i),Vo(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function Ci(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(_r(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function _r(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rs))return;t.globalVersion=rs;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Ci(t)){t.flags&=-3;return}const s=Y,i=Me;Y=t,Me=!0;try{mr(t);const n=t.fn(t._value);(e.version===0||yt(n,t._value))&&(t._value=n,e.version++)}catch(n){throw e.version++,n}finally{Y=s,Me=i,br(t),t.flags&=-3}}function Qi(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Qi(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Vo(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Me=!0;const vr=[];function ct(){vr.push(Me),Me=!1}function ut(){const t=vr.pop();Me=t===void 0?!0:t}function yn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Y;Y=void 0;try{e()}finally{Y=s}}}let rs=0;class $o{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Y||!Me||Y===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Y)s=this.activeLink=new $o(Y,this),Y.deps?(s.prevDep=Y.depsTail,Y.depsTail.nextDep=s,Y.depsTail=s):Y.deps=Y.depsTail=s,wr(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=Y.depsTail,s.nextDep=void 0,Y.depsTail.nextDep=s,Y.depsTail=s,Y.deps===s&&(Y.deps=i)}return s}trigger(e){this.version++,rs++,this.notify(e)}notify(e){zi();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Yi()}}}function wr(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)wr(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Ti=new WeakMap,wt=Symbol(""),xi=Symbol(""),os=Symbol("");function he(t,e,s){if(Me&&Y){let i=Ti.get(t);i||Ti.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new yr),n.map=i,n.key=s),n.track()}}function Je(t,e,s,i,n,r){const o=Ti.get(t);if(!o){rs++;return}const a=l=>{l&&l.trigger()};if(zi(),e==="clear")o.forEach(a);else{const l=N(t),f=l&&Wi(s);if(l&&s==="length"){const u=Number(i);o.forEach((d,p)=>{(p==="length"||p===os||!at(p)&&p>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),f&&a(o.get(os)),e){case"add":l?f&&a(o.get("length")):(a(o.get(wt)),It(t)&&a(o.get(xi)));break;case"delete":l||(a(o.get(wt)),It(t)&&a(o.get(xi)));break;case"set":It(t)&&a(o.get(wt));break}}Yi()}function Tt(t){const e=j(t);return e===t?e:(he(e,"iterate",os),Ke(t)?e:e.map(Te))}function Xi(t){return he(t=j(t),"iterate",os),t}const Ko={__proto__:null,[Symbol.iterator](){return ri(this,Symbol.iterator,Te)},concat(...t){return Tt(this).concat(...t.map(e=>N(e)?Tt(e):e))},entries(){return ri(this,"entries",t=>(t[1]=Te(t[1]),t))},every(t,e){return ze(this,"every",t,e,void 0,arguments)},filter(t,e){return ze(this,"filter",t,e,s=>s.map(Te),arguments)},find(t,e){return ze(this,"find",t,e,Te,arguments)},findIndex(t,e){return ze(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ze(this,"findLast",t,e,Te,arguments)},findLastIndex(t,e){return ze(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ze(this,"forEach",t,e,void 0,arguments)},includes(...t){return oi(this,"includes",t)},indexOf(...t){return oi(this,"indexOf",t)},join(t){return Tt(this).join(t)},lastIndexOf(...t){return oi(this,"lastIndexOf",t)},map(t,e){return ze(this,"map",t,e,void 0,arguments)},pop(){return Ht(this,"pop")},push(...t){return Ht(this,"push",t)},reduce(t,...e){return wn(this,"reduce",t,e)},reduceRight(t,...e){return wn(this,"reduceRight",t,e)},shift(){return Ht(this,"shift")},some(t,e){return ze(this,"some",t,e,void 0,arguments)},splice(...t){return Ht(this,"splice",t)},toReversed(){return Tt(this).toReversed()},toSorted(t){return Tt(this).toSorted(t)},toSpliced(...t){return Tt(this).toSpliced(...t)},unshift(...t){return Ht(this,"unshift",t)},values(){return ri(this,"values",Te)}};function ri(t,e,s){const i=Xi(t),n=i[e]();return i!==t&&!Ke(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=s(r.value)),r}),n}const jo=Array.prototype;function ze(t,e,s,i,n,r){const o=Xi(t),a=o!==t&&!Ke(t),l=o[e];if(l!==jo[e]){const d=l.apply(t,r);return a?Te(d):d}let f=s;o!==t&&(a?f=function(d,p){return s.call(this,Te(d),p,t)}:s.length>2&&(f=function(d,p){return s.call(this,d,p,t)}));const u=l.call(o,f,i);return a&&n?n(u):u}function wn(t,e,s,i){const n=Xi(t);let r=s;return n!==t&&(Ke(t)?s.length>3&&(r=function(o,a,l){return s.call(this,o,a,l,t)}):r=function(o,a,l){return s.call(this,o,Te(a),l,t)}),n[e](r,...i)}function oi(t,e,s){const i=j(t);he(i,"iterate",os);const n=i[e](...s);return(n===-1||n===!1)&&tn(s[0])?(s[0]=j(s[0]),i[e](...s)):n}function Ht(t,e,s=[]){ct(),zi();const i=j(t)[e].apply(t,s);return Yi(),ut(),i}const Wo=$i("__proto__,__v_isRef,__isVue"),Sr=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(at));function Go(t){at(t)||(t=String(t));const e=j(this);return he(e,"has",t),e.hasOwnProperty(t)}class Er{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return i===(n?r?ia:kr:r?xr:Tr).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=N(e);if(!n){let l;if(o&&(l=Ko[s]))return l;if(s==="hasOwnProperty")return Go}const a=Reflect.get(e,s,me(e)?e:i);return(at(s)?Sr.has(s):Wo(s))||(n||he(e,"get",s),r)?a:me(a)?o&&Wi(s)?a:a.value:ee(a)?n?Pr(a):Zi(a):a}}class Cr extends Er{constructor(e=!1){super(!1,e)}set(e,s,i,n){let r=e[s];if(!this._isShallow){const l=Lt(r);if(!Ke(i)&&!Lt(i)&&(r=j(r),i=j(i)),!N(e)&&me(r)&&!me(i))return l?!1:(r.value=i,!0)}const o=N(e)&&Wi(s)?Number(s)<e.length:V(e,s),a=Reflect.set(e,s,i,me(e)?e:n);return e===j(n)&&(o?yt(i,r)&&Je(e,"set",s,i):Je(e,"add",s,i)),a}deleteProperty(e,s){const i=V(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&Je(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!at(s)||!Sr.has(s))&&he(e,"has",s),i}ownKeys(e){return he(e,"iterate",N(e)?"length":wt),Reflect.ownKeys(e)}}class zo extends Er{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Yo=new Cr,Qo=new zo,Xo=new Cr(!0);const ki=t=>t,bs=t=>Reflect.getPrototypeOf(t);function Jo(t,e,s){return function(...i){const n=this.__v_raw,r=j(n),o=It(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,f=n[t](...i),u=s?ki:e?Pi:Te;return!e&&he(r,"iterate",l?xi:wt),{next(){const{value:d,done:p}=f.next();return p?{value:d,done:p}:{value:a?[u(d[0]),u(d[1])]:u(d),done:p}},[Symbol.iterator](){return this}}}}function _s(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Zo(t,e){const s={get(n){const r=this.__v_raw,o=j(r),a=j(n);t||(yt(n,a)&&he(o,"get",n),he(o,"get",a));const{has:l}=bs(o),f=e?ki:t?Pi:Te;if(l.call(o,n))return f(r.get(n));if(l.call(o,a))return f(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&he(j(n),"iterate",wt),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=j(r),a=j(n);return t||(yt(n,a)&&he(o,"has",n),he(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,l=j(a),f=e?ki:t?Pi:Te;return!t&&he(l,"iterate",wt),a.forEach((u,d)=>n.call(r,f(u),f(d),o))}};return le(s,t?{add:_s("add"),set:_s("set"),delete:_s("delete"),clear:_s("clear")}:{add(n){!e&&!Ke(n)&&!Lt(n)&&(n=j(n));const r=j(this);return bs(r).has.call(r,n)||(r.add(n),Je(r,"add",n,n)),this},set(n,r){!e&&!Ke(r)&&!Lt(r)&&(r=j(r));const o=j(this),{has:a,get:l}=bs(o);let f=a.call(o,n);f||(n=j(n),f=a.call(o,n));const u=l.call(o,n);return o.set(n,r),f?yt(r,u)&&Je(o,"set",n,r):Je(o,"add",n,r),this},delete(n){const r=j(this),{has:o,get:a}=bs(r);let l=o.call(r,n);l||(n=j(n),l=o.call(r,n)),a&&a.call(r,n);const f=r.delete(n);return l&&Je(r,"delete",n,void 0),f},clear(){const n=j(this),r=n.size!==0,o=n.clear();return r&&Je(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Jo(n,t,e)}),s}function Ji(t,e){const s=Zo(t,e);return(i,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(V(s,n)&&n in i?s:i,n,r)}const ea={get:Ji(!1,!1)},ta={get:Ji(!1,!0)},sa={get:Ji(!0,!1)};const Tr=new WeakMap,xr=new WeakMap,kr=new WeakMap,ia=new WeakMap;function na(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ra(t){return t.__v_skip||!Object.isExtensible(t)?0:na(Oo(t))}function Zi(t){return Lt(t)?t:en(t,!1,Yo,ea,Tr)}function oa(t){return en(t,!1,Xo,ta,xr)}function Pr(t){return en(t,!0,Qo,sa,kr)}function en(t,e,s,i,n){if(!ee(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=n.get(t);if(r)return r;const o=ra(t);if(o===0)return t;const a=new Proxy(t,o===2?i:s);return n.set(t,a),a}function es(t){return Lt(t)?es(t.__v_raw):!!(t&&t.__v_isReactive)}function Lt(t){return!!(t&&t.__v_isReadonly)}function Ke(t){return!!(t&&t.__v_isShallow)}function tn(t){return t?!!t.__v_raw:!1}function j(t){const e=t&&t.__v_raw;return e?j(e):t}function aa(t){return!V(t,"__v_skip")&&Object.isExtensible(t)&&cr(t,"__v_skip",!0),t}const Te=t=>ee(t)?Zi(t):t,Pi=t=>ee(t)?Pr(t):t;function me(t){return t?t.__v_isRef===!0:!1}function la(t){return me(t)?t.value:t}const ca={get:(t,e,s)=>e==="__v_raw"?t:la(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return me(n)&&!me(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Ar(t){return es(t)?t:new Proxy(t,ca)}class ua{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new yr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Y!==this)return gr(this,!0),!0}get value(){const e=this.dep.track();return _r(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ha(t,e,s=!1){let i,n;return B(t)?i=t:(i=t.get,n=t.set),new ua(i,n,s)}const vs={},qs=new WeakMap;let _t;function fa(t,e=!1,s=_t){if(s){let i=qs.get(s);i||qs.set(s,i=[]),i.push(t)}}function da(t,e,s=W){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:a,call:l}=s,f=A=>n?A:Ke(A)||n===!1||n===0?Ze(A,1):Ze(A);let u,d,p,w,y=!1,x=!1;if(me(t)?(d=()=>t.value,y=Ke(t)):es(t)?(d=()=>f(t),y=!0):N(t)?(x=!0,y=t.some(A=>es(A)||Ke(A)),d=()=>t.map(A=>{if(me(A))return A.value;if(es(A))return f(A);if(B(A))return l?l(A,2):A()})):B(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){ct();try{p()}finally{ut()}}const A=_t;_t=u;try{return l?l(t,3,[w]):t(w)}finally{_t=A}}:d=Le,e&&n){const A=d,K=n===!0?1/0:n;d=()=>Ze(A(),K)}const D=Ho(),M=()=>{u.stop(),D&&D.active&&ji(D.effects,u)};if(r&&e){const A=e;e=(...K)=>{A(...K),M()}}let H=x?new Array(t.length).fill(vs):vs;const k=A=>{if(!(!(u.flags&1)||!u.dirty&&!A))if(e){const K=u.run();if(n||y||(x?K.some((Pe,_e)=>yt(Pe,H[_e])):yt(K,H))){p&&p();const Pe=_t;_t=u;try{const _e=[K,H===vs?void 0:x&&H[0]===vs?[]:H,w];l?l(e,3,_e):e(..._e),H=K}finally{_t=Pe}}}else u.run()};return a&&a(k),u=new dr(d),u.scheduler=o?()=>o(k,!1):k,w=A=>fa(A,!1,u),p=u.onStop=()=>{const A=qs.get(u);if(A){if(l)l(A,4);else for(const K of A)K();qs.delete(u)}},e?i?k(!0):H=u.run():o?o(k.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function Ze(t,e=1/0,s){if(e<=0||!ee(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,me(t))Ze(t.value,e,s);else if(N(t))for(let i=0;i<t.length;i++)Ze(t[i],e,s);else if(rr(t)||It(t))t.forEach(i=>{Ze(i,e,s)});else if(lr(t)){for(const i in t)Ze(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ze(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hs(t,e,s,i){try{return i?t(...i):t()}catch(n){js(n,e,s)}}function We(t,e,s,i){if(B(t)){const n=hs(t,e,s,i);return n&&or(n)&&n.catch(r=>{js(r,e,s)}),n}if(N(t)){const n=[];for(let r=0;r<t.length;r++)n.push(We(t[r],e,s,i));return n}}function js(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||W;if(e){let a=e.parent;const l=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,f)===!1)return}a=a.parent}if(r){ct(),hs(r,null,10,[t,l,f]),ut();return}}pa(t,s,n,i,o)}function pa(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const ge=[];let He=-1;const Ot=[];let it=null,xt=0;const Ir=Promise.resolve();let Ls=null;function ga(t){const e=Ls||Ir;return t?e.then(this?t.bind(this):t):e}function ma(t){let e=He+1,s=ge.length;for(;e<s;){const i=e+s>>>1,n=ge[i],r=as(n);r<t||r===t&&n.flags&2?e=i+1:s=i}return e}function sn(t){if(!(t.flags&1)){const e=as(t),s=ge[ge.length-1];!s||!(t.flags&2)&&e>=as(s)?ge.push(t):ge.splice(ma(e),0,t),t.flags|=1,Or()}}function Or(){Ls||(Ls=Ir.then(qr))}function ba(t){N(t)?Ot.push(...t):it&&t.id===-1?it.splice(xt+1,0,t):t.flags&1||(Ot.push(t),t.flags|=1),Or()}function Sn(t,e,s=He+1){for(;s<ge.length;s++){const i=ge[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;ge.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Rr(t){if(Ot.length){const e=[...new Set(Ot)].sort((s,i)=>as(s)-as(i));if(Ot.length=0,it){it.push(...e);return}for(it=e,xt=0;xt<it.length;xt++){const s=it[xt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}it=null,xt=0}}const as=t=>t.id==null?t.flags&2?-1:1/0:t.id;function qr(t){const e=Le;try{for(He=0;He<ge.length;He++){const s=ge[He];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),hs(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;He<ge.length;He++){const s=ge[He];s&&(s.flags&=-2)}He=-1,ge.length=0,Rr(),Ls=null,(ge.length||Ot.length)&&qr()}}let xe=null,Lr=null;function Ms(t){const e=xe;return xe=t,Lr=t&&t.type.__scopeId||null,e}function _a(t,e=xe,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&On(-1);const r=Ms(e);let o;try{o=t(...n)}finally{Ms(r),i._d&&On(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function va(t,e){if(xe===null)return t;const s=Ys(xe),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,a,l=W]=e[n];r&&(B(r)&&(r={mounted:r,updated:r}),r.deep&&Ze(o),i.push({dir:r,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function gt(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(ct(),We(l,s,8,[t.el,a,t,e]),ut())}}const ya=Symbol("_vte"),wa=t=>t.__isTeleport;function nn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,nn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Mr(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ns(t,e,s,i,n=!1){if(N(t)){t.forEach((y,x)=>Ns(y,e&&(N(e)?e[x]:e),s,i,n));return}if(ts(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ns(t,e,s,i.component.subTree);return}const r=i.shapeFlag&4?Ys(i.component):i.el,o=n?null:r,{i:a,r:l}=t,f=e&&e.r,u=a.refs===W?a.refs={}:a.refs,d=a.setupState,p=j(d),w=d===W?()=>!1:y=>V(p,y);if(f!=null&&f!==l&&(ne(f)?(u[f]=null,w(f)&&(d[f]=null)):me(f)&&(f.value=null)),B(l))hs(l,a,12,[o,u]);else{const y=ne(l),x=me(l);if(y||x){const D=()=>{if(t.f){const M=y?w(l)?d[l]:u[l]:l.value;n?N(M)&&ji(M,r):N(M)?M.includes(r)||M.push(r):y?(u[l]=[r],w(l)&&(d[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else y?(u[l]=o,w(l)&&(d[l]=o)):x&&(l.value=o,t.k&&(u[t.k]=o))};o?(D.id=-1,Ee(D,s)):D()}}}Ks().requestIdleCallback;Ks().cancelIdleCallback;const ts=t=>!!t.type.__asyncLoader,Nr=t=>t.type.__isKeepAlive;function Sa(t,e){Br(t,"a",e)}function Ea(t,e){Br(t,"da",e)}function Br(t,e,s=fe){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Ws(e,i,s),s){let n=s.parent;for(;n&&n.parent;)Nr(n.parent.vnode)&&Ca(i,e,s,n),n=n.parent}}function Ca(t,e,s,i){const n=Ws(e,t,i,!0);Dr(()=>{ji(i[e],n)},s)}function Ws(t,e,s=fe,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{ct();const a=fs(s),l=We(e,s,t,o);return a(),ut(),l});return i?n.unshift(r):n.push(r),r}}const et=t=>(e,s=fe)=>{(!cs||t==="sp")&&Ws(t,(...i)=>e(...i),s)},Ta=et("bm"),xa=et("m"),ka=et("bu"),Pa=et("u"),Aa=et("bum"),Dr=et("um"),Ia=et("sp"),Oa=et("rtg"),Ra=et("rtc");function qa(t,e=fe){Ws("ec",t,e)}const Fr="components";function Ur(t,e){return Ma(Fr,t,!0,e)||t}const La=Symbol.for("v-ndc");function Ma(t,e,s=!0,i=!1){const n=xe||fe;if(n){const r=n.type;if(t===Fr){const a=Tl(r,!1);if(a&&(a===e||a===Oe(e)||a===$s(Oe(e))))return r}const o=En(n[t]||r[t],e)||En(n.appContext[t],e);return!o&&i?r:o}}function En(t,e){return t&&(t[e]||t[Oe(e)]||t[$s(Oe(e))])}const Ai=t=>t?ao(t)?Ys(t):Ai(t.parent):null,ss=le(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ai(t.parent),$root:t=>Ai(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>rn(t),$forceUpdate:t=>t.f||(t.f=()=>{sn(t.update)}),$nextTick:t=>t.n||(t.n=ga.bind(t.proxy)),$watch:t=>il.bind(t)}),ai=(t,e)=>t!==W&&!t.__isScriptSetup&&V(t,e),Na={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:a,appContext:l}=t;let f;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(ai(i,e))return o[e]=1,i[e];if(n!==W&&V(n,e))return o[e]=2,n[e];if((f=t.propsOptions[0])&&V(f,e))return o[e]=3,r[e];if(s!==W&&V(s,e))return o[e]=4,s[e];Ii&&(o[e]=0)}}const u=ss[e];let d,p;if(u)return e==="$attrs"&&he(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(s!==W&&V(s,e))return o[e]=4,s[e];if(p=l.config.globalProperties,V(p,e))return p[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return ai(n,e)?(n[e]=s,!0):i!==W&&V(i,e)?(i[e]=s,!0):V(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:r}},o){let a;return!!s[o]||t!==W&&V(t,o)||ai(e,o)||(a=r[0])&&V(a,o)||V(i,o)||V(ss,o)||V(n.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:V(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Cn(t){return N(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Ii=!0;function Ba(t){const e=rn(t),s=t.proxy,i=t.ctx;Ii=!1,e.beforeCreate&&Tn(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:a,provide:l,inject:f,created:u,beforeMount:d,mounted:p,beforeUpdate:w,updated:y,activated:x,deactivated:D,beforeDestroy:M,beforeUnmount:H,destroyed:k,unmounted:A,render:K,renderTracked:Pe,renderTriggered:_e,errorCaptured:ve,serverPrefetch:ht,expose:ft,inheritAttrs:Dt,components:ds,directives:ps,filters:Js}=e;if(f&&Da(f,i,null),o)for(const Q in o){const G=o[Q];B(G)&&(i[Q]=G.bind(s))}if(n){const Q=n.call(s,s);ee(Q)&&(t.data=Zi(Q))}if(Ii=!0,r)for(const Q in r){const G=r[Q],dt=B(G)?G.bind(s,s):B(G.get)?G.get.bind(s,s):Le,gs=!B(G)&&B(G.set)?G.set.bind(s):Le,pt=kl({get:dt,set:gs});Object.defineProperty(i,Q,{enumerable:!0,configurable:!0,get:()=>pt.value,set:Be=>pt.value=Be})}if(a)for(const Q in a)Hr(a[Q],i,s,Q);if(l){const Q=B(l)?l.call(s):l;Reflect.ownKeys(Q).forEach(G=>{Ka(G,Q[G])})}u&&Tn(u,t,"c");function de(Q,G){N(G)?G.forEach(dt=>Q(dt.bind(s))):G&&Q(G.bind(s))}if(de(Ta,d),de(xa,p),de(ka,w),de(Pa,y),de(Sa,x),de(Ea,D),de(qa,ve),de(Ra,Pe),de(Oa,_e),de(Aa,H),de(Dr,A),de(Ia,ht),N(ft))if(ft.length){const Q=t.exposed||(t.exposed={});ft.forEach(G=>{Object.defineProperty(Q,G,{get:()=>s[G],set:dt=>s[G]=dt})})}else t.exposed||(t.exposed={});K&&t.render===Le&&(t.render=K),Dt!=null&&(t.inheritAttrs=Dt),ds&&(t.components=ds),ps&&(t.directives=ps),ht&&Mr(t)}function Da(t,e,s=Le){N(t)&&(t=Oi(t));for(const i in t){const n=t[i];let r;ee(n)?"default"in n?r=Ts(n.from||i,n.default,!0):r=Ts(n.from||i):r=Ts(n),me(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Tn(t,e,s){We(N(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function Hr(t,e,s,i){let n=i.includes(".")?to(s,i):()=>s[i];if(ne(t)){const r=e[t];B(r)&&ci(n,r)}else if(B(t))ci(n,t.bind(s));else if(ee(t))if(N(t))t.forEach(r=>Hr(r,e,s,i));else{const r=B(t.handler)?t.handler.bind(s):e[t.handler];B(r)&&ci(n,r,t)}}function rn(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!n.length&&!s&&!i?l=e:(l={},n.length&&n.forEach(f=>Bs(l,f,o,!0)),Bs(l,e,o)),ee(e)&&r.set(e,l),l}function Bs(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&Bs(t,r,s,!0),n&&n.forEach(o=>Bs(t,o,s,!0));for(const o in e)if(!(i&&o==="expose")){const a=Fa[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Fa={data:xn,props:kn,emits:kn,methods:Gt,computed:Gt,beforeCreate:pe,created:pe,beforeMount:pe,mounted:pe,beforeUpdate:pe,updated:pe,beforeDestroy:pe,beforeUnmount:pe,destroyed:pe,unmounted:pe,activated:pe,deactivated:pe,errorCaptured:pe,serverPrefetch:pe,components:Gt,directives:Gt,watch:Ha,provide:xn,inject:Ua};function xn(t,e){return e?t?function(){return le(B(t)?t.call(this,this):t,B(e)?e.call(this,this):e)}:e:t}function Ua(t,e){return Gt(Oi(t),Oi(e))}function Oi(t){if(N(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function pe(t,e){return t?[...new Set([].concat(t,e))]:e}function Gt(t,e){return t?le(Object.create(null),t,e):e}function kn(t,e){return t?N(t)&&N(e)?[...new Set([...t,...e])]:le(Object.create(null),Cn(t),Cn(e??{})):e}function Ha(t,e){if(!t)return e;if(!e)return t;const s=le(Object.create(null),t);for(const i in e)s[i]=pe(t[i],e[i]);return s}function Vr(){return{app:null,config:{isNativeTag:Ao,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Va=0;function $a(t,e){return function(i,n=null){B(i)||(i=le({},i)),n!=null&&!ee(n)&&(n=null);const r=Vr(),o=new WeakSet,a=[];let l=!1;const f=r.app={_uid:Va++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Pl,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&B(u.install)?(o.add(u),u.install(f,...d)):B(u)&&(o.add(u),u(f,...d))),f},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),f},component(u,d){return d?(r.components[u]=d,f):r.components[u]},directive(u,d){return d?(r.directives[u]=d,f):r.directives[u]},mount(u,d,p){if(!l){const w=f._ceVNode||Ne(i,n);return w.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),d&&e?e(w,u):t(w,u,p),l=!0,f._container=u,u.__vue_app__=f,Ys(w.component)}},onUnmount(u){a.push(u)},unmount(){l&&(We(a,f._instance,16),t(null,f._container),delete f._container.__vue_app__)},provide(u,d){return r.provides[u]=d,f},runWithContext(u){const d=Rt;Rt=f;try{return u()}finally{Rt=d}}};return f}}let Rt=null;function Ka(t,e){if(fe){let s=fe.provides;const i=fe.parent&&fe.parent.provides;i===s&&(s=fe.provides=Object.create(i)),s[t]=e}}function Ts(t,e,s=!1){const i=fe||xe;if(i||Rt){const n=Rt?Rt._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&B(e)?e.call(i&&i.proxy):e}}const $r={},Kr=()=>Object.create($r),jr=t=>Object.getPrototypeOf(t)===$r;function ja(t,e,s,i=!1){const n={},r=Kr();t.propsDefaults=Object.create(null),Wr(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:oa(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function Wa(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,a=j(n),[l]=t.propsOptions;let f=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let p=u[d];if(Gs(t.emitsOptions,p))continue;const w=e[p];if(l)if(V(r,p))w!==r[p]&&(r[p]=w,f=!0);else{const y=Oe(p);n[y]=Ri(l,a,y,w,t,!1)}else w!==r[p]&&(r[p]=w,f=!0)}}}else{Wr(t,e,n,r)&&(f=!0);let u;for(const d in a)(!e||!V(e,d)&&((u=lt(d))===d||!V(e,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(n[d]=Ri(l,a,d,void 0,t,!0)):delete n[d]);if(r!==a)for(const d in r)(!e||!V(e,d))&&(delete r[d],f=!0)}f&&Je(t.attrs,"set","")}function Wr(t,e,s,i){const[n,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Qt(l))continue;const f=e[l];let u;n&&V(n,u=Oe(l))?!r||!r.includes(u)?s[u]=f:(a||(a={}))[u]=f:Gs(t.emitsOptions,l)||(!(l in i)||f!==i[l])&&(i[l]=f,o=!0)}if(r){const l=j(s),f=a||W;for(let u=0;u<r.length;u++){const d=r[u];s[d]=Ri(n,l,d,f[d],t,!V(f,d))}}return o}function Ri(t,e,s,i,n,r){const o=t[s];if(o!=null){const a=V(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&B(l)){const{propsDefaults:f}=n;if(s in f)i=f[s];else{const u=fs(n);i=f[s]=l.call(null,e),u()}}else i=l;n.ce&&n.ce._setProp(s,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===lt(s))&&(i=!0))}return i}const Ga=new WeakMap;function Gr(t,e,s=!1){const i=s?Ga:e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},a=[];let l=!1;if(!B(t)){const u=d=>{l=!0;const[p,w]=Gr(d,e,!0);le(o,p),w&&a.push(...w)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return ee(t)&&i.set(t,At),At;if(N(r))for(let u=0;u<r.length;u++){const d=Oe(r[u]);Pn(d)&&(o[d]=W)}else if(r)for(const u in r){const d=Oe(u);if(Pn(d)){const p=r[u],w=o[d]=N(p)||B(p)?{type:p}:le({},p),y=w.type;let x=!1,D=!0;if(N(y))for(let M=0;M<y.length;++M){const H=y[M],k=B(H)&&H.name;if(k==="Boolean"){x=!0;break}else k==="String"&&(D=!1)}else x=B(y)&&y.name==="Boolean";w[0]=x,w[1]=D,(x||V(w,"default"))&&a.push(d)}}const f=[o,a];return ee(t)&&i.set(t,f),f}function Pn(t){return t[0]!=="$"&&!Qt(t)}const zr=t=>t[0]==="_"||t==="$stable",on=t=>N(t)?t.map($e):[$e(t)],za=(t,e,s)=>{if(e._n)return e;const i=_a((...n)=>on(e(...n)),s);return i._c=!1,i},Yr=(t,e,s)=>{const i=t._ctx;for(const n in t){if(zr(n))continue;const r=t[n];if(B(r))e[n]=za(n,r,i);else if(r!=null){const o=on(r);e[n]=()=>o}}},Qr=(t,e)=>{const s=on(e);t.slots.default=()=>s},Xr=(t,e,s)=>{for(const i in e)(s||i!=="_")&&(t[i]=e[i])},Ya=(t,e,s)=>{const i=t.slots=Kr();if(t.vnode.shapeFlag&32){const n=e._;n?(Xr(i,e,s),s&&cr(i,"_",n,!0)):Yr(e,i)}else e&&Qr(t,e)},Qa=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=W;if(i.shapeFlag&32){const a=e._;a?s&&a===1?r=!1:Xr(n,e,s):(r=!e.$stable,Yr(e,n)),o=e}else e&&(Qr(t,e),o={default:1});if(r)for(const a in n)!zr(a)&&o[a]==null&&delete n[a]},Ee=ul;function Xa(t){return Ja(t)}function Ja(t,e){const s=Ks();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:a,createComment:l,setText:f,setElementText:u,parentNode:d,nextSibling:p,setScopeId:w=Le,insertStaticContent:y}=t,x=(c,h,g,_=null,m=null,b=null,C=void 0,E=null,S=!!h.dynamicChildren)=>{if(c===h)return;c&&!Vt(c,h)&&(_=ms(c),Be(c,m,b,!0),c=null),h.patchFlag===-2&&(S=!1,h.dynamicChildren=null);const{type:v,ref:O,shapeFlag:T}=h;switch(v){case zs:D(c,h,g,_);break;case Et:M(c,h,g,_);break;case hi:c==null&&H(h,g,_,C);break;case Qe:ds(c,h,g,_,m,b,C,E,S);break;default:T&1?K(c,h,g,_,m,b,C,E,S):T&6?ps(c,h,g,_,m,b,C,E,S):(T&64||T&128)&&v.process(c,h,g,_,m,b,C,E,S,Ct)}O!=null&&m&&Ns(O,c&&c.ref,b,h||c,!h)},D=(c,h,g,_)=>{if(c==null)i(h.el=a(h.children),g,_);else{const m=h.el=c.el;h.children!==c.children&&f(m,h.children)}},M=(c,h,g,_)=>{c==null?i(h.el=l(h.children||""),g,_):h.el=c.el},H=(c,h,g,_)=>{[c.el,c.anchor]=y(c.children,h,g,_,c.el,c.anchor)},k=({el:c,anchor:h},g,_)=>{let m;for(;c&&c!==h;)m=p(c),i(c,g,_),c=m;i(h,g,_)},A=({el:c,anchor:h})=>{let g;for(;c&&c!==h;)g=p(c),n(c),c=g;n(h)},K=(c,h,g,_,m,b,C,E,S)=>{h.type==="svg"?C="svg":h.type==="math"&&(C="mathml"),c==null?Pe(h,g,_,m,b,C,E,S):ht(c,h,m,b,C,E,S)},Pe=(c,h,g,_,m,b,C,E)=>{let S,v;const{props:O,shapeFlag:T,transition:I,dirs:q}=c;if(S=c.el=o(c.type,b,O&&O.is,O),T&8?u(S,c.children):T&16&&ve(c.children,S,null,_,m,li(c,b),C,E),q&&gt(c,null,_,"created"),_e(S,c,c.scopeId,C,_),O){for(const z in O)z!=="value"&&!Qt(z)&&r(S,z,null,O[z],b,_);"value"in O&&r(S,"value",null,O.value,b),(v=O.onVnodeBeforeMount)&&Fe(v,_,c)}q&&gt(c,null,_,"beforeMount");const U=Za(m,I);U&&I.beforeEnter(S),i(S,h,g),((v=O&&O.onVnodeMounted)||U||q)&&Ee(()=>{v&&Fe(v,_,c),U&&I.enter(S),q&&gt(c,null,_,"mounted")},m)},_e=(c,h,g,_,m)=>{if(g&&w(c,g),_)for(let b=0;b<_.length;b++)w(c,_[b]);if(m){let b=m.subTree;if(h===b||io(b.type)&&(b.ssContent===h||b.ssFallback===h)){const C=m.vnode;_e(c,C,C.scopeId,C.slotScopeIds,m.parent)}}},ve=(c,h,g,_,m,b,C,E,S=0)=>{for(let v=S;v<c.length;v++){const O=c[v]=E?nt(c[v]):$e(c[v]);x(null,O,h,g,_,m,b,C,E)}},ht=(c,h,g,_,m,b,C)=>{const E=h.el=c.el;let{patchFlag:S,dynamicChildren:v,dirs:O}=h;S|=c.patchFlag&16;const T=c.props||W,I=h.props||W;let q;if(g&&mt(g,!1),(q=I.onVnodeBeforeUpdate)&&Fe(q,g,h,c),O&&gt(h,c,g,"beforeUpdate"),g&&mt(g,!0),(T.innerHTML&&I.innerHTML==null||T.textContent&&I.textContent==null)&&u(E,""),v?ft(c.dynamicChildren,v,E,g,_,li(h,m),b):C||G(c,h,E,null,g,_,li(h,m),b,!1),S>0){if(S&16)Dt(E,T,I,g,m);else if(S&2&&T.class!==I.class&&r(E,"class",null,I.class,m),S&4&&r(E,"style",T.style,I.style,m),S&8){const U=h.dynamicProps;for(let z=0;z<U.length;z++){const $=U[z],ye=T[$],ce=I[$];(ce!==ye||$==="value")&&r(E,$,ye,ce,m,g)}}S&1&&c.children!==h.children&&u(E,h.children)}else!C&&v==null&&Dt(E,T,I,g,m);((q=I.onVnodeUpdated)||O)&&Ee(()=>{q&&Fe(q,g,h,c),O&&gt(h,c,g,"updated")},_)},ft=(c,h,g,_,m,b,C)=>{for(let E=0;E<h.length;E++){const S=c[E],v=h[E],O=S.el&&(S.type===Qe||!Vt(S,v)||S.shapeFlag&70)?d(S.el):g;x(S,v,O,null,_,m,b,C,!0)}},Dt=(c,h,g,_,m)=>{if(h!==g){if(h!==W)for(const b in h)!Qt(b)&&!(b in g)&&r(c,b,h[b],null,m,_);for(const b in g){if(Qt(b))continue;const C=g[b],E=h[b];C!==E&&b!=="value"&&r(c,b,E,C,m,_)}"value"in g&&r(c,"value",h.value,g.value,m)}},ds=(c,h,g,_,m,b,C,E,S)=>{const v=h.el=c?c.el:a(""),O=h.anchor=c?c.anchor:a("");let{patchFlag:T,dynamicChildren:I,slotScopeIds:q}=h;q&&(E=E?E.concat(q):q),c==null?(i(v,g,_),i(O,g,_),ve(h.children||[],g,O,m,b,C,E,S)):T>0&&T&64&&I&&c.dynamicChildren?(ft(c.dynamicChildren,I,g,m,b,C,E),(h.key!=null||m&&h===m.subTree)&&Jr(c,h,!0)):G(c,h,g,O,m,b,C,E,S)},ps=(c,h,g,_,m,b,C,E,S)=>{h.slotScopeIds=E,c==null?h.shapeFlag&512?m.ctx.activate(h,g,_,C,S):Js(h,g,_,m,b,C,S):pn(c,h,S)},Js=(c,h,g,_,m,b,C)=>{const E=c.component=yl(c,_,m);if(Nr(c)&&(E.ctx.renderer=Ct),wl(E,!1,C),E.asyncDep){if(m&&m.registerDep(E,de,C),!c.el){const S=E.subTree=Ne(Et);M(null,S,h,g)}}else de(E,c,h,g,m,b,C)},pn=(c,h,g)=>{const _=h.component=c.component;if(ll(c,h,g))if(_.asyncDep&&!_.asyncResolved){Q(_,h,g);return}else _.next=h,_.update();else h.el=c.el,_.vnode=h},de=(c,h,g,_,m,b,C)=>{const E=()=>{if(c.isMounted){let{next:T,bu:I,u:q,parent:U,vnode:z}=c;{const we=Zr(c);if(we){T&&(T.el=z.el,Q(c,T,C)),we.asyncDep.then(()=>{c.isUnmounted||E()});return}}let $=T,ye;mt(c,!1),T?(T.el=z.el,Q(c,T,C)):T=z,I&&Cs(I),(ye=T.props&&T.props.onVnodeBeforeUpdate)&&Fe(ye,U,T,z),mt(c,!0);const ce=ui(c),Re=c.subTree;c.subTree=ce,x(Re,ce,d(Re.el),ms(Re),c,m,b),T.el=ce.el,$===null&&cl(c,ce.el),q&&Ee(q,m),(ye=T.props&&T.props.onVnodeUpdated)&&Ee(()=>Fe(ye,U,T,z),m)}else{let T;const{el:I,props:q}=h,{bm:U,m:z,parent:$,root:ye,type:ce}=c,Re=ts(h);if(mt(c,!1),U&&Cs(U),!Re&&(T=q&&q.onVnodeBeforeMount)&&Fe(T,$,h),mt(c,!0),I&&ti){const we=()=>{c.subTree=ui(c),ti(I,c.subTree,c,m,null)};Re&&ce.__asyncHydrate?ce.__asyncHydrate(I,c,we):we()}else{ye.ce&&ye.ce._injectChildStyle(ce);const we=c.subTree=ui(c);x(null,we,g,_,c,m,b),h.el=we.el}if(z&&Ee(z,m),!Re&&(T=q&&q.onVnodeMounted)){const we=h;Ee(()=>Fe(T,$,we),m)}(h.shapeFlag&256||$&&ts($.vnode)&&$.vnode.shapeFlag&256)&&c.a&&Ee(c.a,m),c.isMounted=!0,h=g=_=null}};c.scope.on();const S=c.effect=new dr(E);c.scope.off();const v=c.update=S.run.bind(S),O=c.job=S.runIfDirty.bind(S);O.i=c,O.id=c.uid,S.scheduler=()=>sn(O),mt(c,!0),v()},Q=(c,h,g)=>{h.component=c;const _=c.vnode.props;c.vnode=h,c.next=null,Wa(c,h.props,_,g),Qa(c,h.children,g),ct(),Sn(c),ut()},G=(c,h,g,_,m,b,C,E,S=!1)=>{const v=c&&c.children,O=c?c.shapeFlag:0,T=h.children,{patchFlag:I,shapeFlag:q}=h;if(I>0){if(I&128){gs(v,T,g,_,m,b,C,E,S);return}else if(I&256){dt(v,T,g,_,m,b,C,E,S);return}}q&8?(O&16&&Ft(v,m,b),T!==v&&u(g,T)):O&16?q&16?gs(v,T,g,_,m,b,C,E,S):Ft(v,m,b,!0):(O&8&&u(g,""),q&16&&ve(T,g,_,m,b,C,E,S))},dt=(c,h,g,_,m,b,C,E,S)=>{c=c||At,h=h||At;const v=c.length,O=h.length,T=Math.min(v,O);let I;for(I=0;I<T;I++){const q=h[I]=S?nt(h[I]):$e(h[I]);x(c[I],q,g,null,m,b,C,E,S)}v>O?Ft(c,m,b,!0,!1,T):ve(h,g,_,m,b,C,E,S,T)},gs=(c,h,g,_,m,b,C,E,S)=>{let v=0;const O=h.length;let T=c.length-1,I=O-1;for(;v<=T&&v<=I;){const q=c[v],U=h[v]=S?nt(h[v]):$e(h[v]);if(Vt(q,U))x(q,U,g,null,m,b,C,E,S);else break;v++}for(;v<=T&&v<=I;){const q=c[T],U=h[I]=S?nt(h[I]):$e(h[I]);if(Vt(q,U))x(q,U,g,null,m,b,C,E,S);else break;T--,I--}if(v>T){if(v<=I){const q=I+1,U=q<O?h[q].el:_;for(;v<=I;)x(null,h[v]=S?nt(h[v]):$e(h[v]),g,U,m,b,C,E,S),v++}}else if(v>I)for(;v<=T;)Be(c[v],m,b,!0),v++;else{const q=v,U=v,z=new Map;for(v=U;v<=I;v++){const Se=h[v]=S?nt(h[v]):$e(h[v]);Se.key!=null&&z.set(Se.key,v)}let $,ye=0;const ce=I-U+1;let Re=!1,we=0;const Ut=new Array(ce);for(v=0;v<ce;v++)Ut[v]=0;for(v=q;v<=T;v++){const Se=c[v];if(ye>=ce){Be(Se,m,b,!0);continue}let De;if(Se.key!=null)De=z.get(Se.key);else for($=U;$<=I;$++)if(Ut[$-U]===0&&Vt(Se,h[$])){De=$;break}De===void 0?Be(Se,m,b,!0):(Ut[De-U]=v+1,De>=we?we=De:Re=!0,x(Se,h[De],g,null,m,b,C,E,S),ye++)}const bn=Re?el(Ut):At;for($=bn.length-1,v=ce-1;v>=0;v--){const Se=U+v,De=h[Se],_n=Se+1<O?h[Se+1].el:_;Ut[v]===0?x(null,De,g,_n,m,b,C,E,S):Re&&($<0||v!==bn[$]?pt(De,g,_n,2):$--)}}},pt=(c,h,g,_,m=null)=>{const{el:b,type:C,transition:E,children:S,shapeFlag:v}=c;if(v&6){pt(c.component.subTree,h,g,_);return}if(v&128){c.suspense.move(h,g,_);return}if(v&64){C.move(c,h,g,Ct);return}if(C===Qe){i(b,h,g);for(let T=0;T<S.length;T++)pt(S[T],h,g,_);i(c.anchor,h,g);return}if(C===hi){k(c,h,g);return}if(_!==2&&v&1&&E)if(_===0)E.beforeEnter(b),i(b,h,g),Ee(()=>E.enter(b),m);else{const{leave:T,delayLeave:I,afterLeave:q}=E,U=()=>i(b,h,g),z=()=>{T(b,()=>{U(),q&&q()})};I?I(b,U,z):z()}else i(b,h,g)},Be=(c,h,g,_=!1,m=!1)=>{const{type:b,props:C,ref:E,children:S,dynamicChildren:v,shapeFlag:O,patchFlag:T,dirs:I,cacheIndex:q}=c;if(T===-2&&(m=!1),E!=null&&Ns(E,null,g,c,!0),q!=null&&(h.renderCache[q]=void 0),O&256){h.ctx.deactivate(c);return}const U=O&1&&I,z=!ts(c);let $;if(z&&($=C&&C.onVnodeBeforeUnmount)&&Fe($,h,c),O&6)xo(c.component,g,_);else{if(O&128){c.suspense.unmount(g,_);return}U&&gt(c,null,h,"beforeUnmount"),O&64?c.type.remove(c,h,g,Ct,_):v&&!v.hasOnce&&(b!==Qe||T>0&&T&64)?Ft(v,h,g,!1,!0):(b===Qe&&T&384||!m&&O&16)&&Ft(S,h,g),_&&gn(c)}(z&&($=C&&C.onVnodeUnmounted)||U)&&Ee(()=>{$&&Fe($,h,c),U&&gt(c,null,h,"unmounted")},g)},gn=c=>{const{type:h,el:g,anchor:_,transition:m}=c;if(h===Qe){To(g,_);return}if(h===hi){A(c);return}const b=()=>{n(g),m&&!m.persisted&&m.afterLeave&&m.afterLeave()};if(c.shapeFlag&1&&m&&!m.persisted){const{leave:C,delayLeave:E}=m,S=()=>C(g,b);E?E(c.el,b,S):S()}else b()},To=(c,h)=>{let g;for(;c!==h;)g=p(c),n(c),c=g;n(h)},xo=(c,h,g)=>{const{bum:_,scope:m,job:b,subTree:C,um:E,m:S,a:v}=c;An(S),An(v),_&&Cs(_),m.stop(),b&&(b.flags|=8,Be(C,c,h,g)),E&&Ee(E,h),Ee(()=>{c.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&c.asyncDep&&!c.asyncResolved&&c.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},Ft=(c,h,g,_=!1,m=!1,b=0)=>{for(let C=b;C<c.length;C++)Be(c[C],h,g,_,m)},ms=c=>{if(c.shapeFlag&6)return ms(c.component.subTree);if(c.shapeFlag&128)return c.suspense.next();const h=p(c.anchor||c.el),g=h&&h[ya];return g?p(g):h};let Zs=!1;const mn=(c,h,g)=>{c==null?h._vnode&&Be(h._vnode,null,null,!0):x(h._vnode||null,c,h,null,null,null,g),h._vnode=c,Zs||(Zs=!0,Sn(),Rr(),Zs=!1)},Ct={p:x,um:Be,m:pt,r:gn,mt:Js,mc:ve,pc:G,pbc:ft,n:ms,o:t};let ei,ti;return e&&([ei,ti]=e(Ct)),{render:mn,hydrate:ei,createApp:$a(mn,ei)}}function li({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function mt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Za(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jr(t,e,s=!1){const i=t.children,n=e.children;if(N(i)&&N(n))for(let r=0;r<i.length;r++){const o=i[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=nt(n[r]),a.el=o.el),!s&&a.patchFlag!==-2&&Jr(o,a)),a.type===zs&&(a.el=o.el)}}function el(t){const e=t.slice(),s=[0];let i,n,r,o,a;const l=t.length;for(i=0;i<l;i++){const f=t[i];if(f!==0){if(n=s[s.length-1],t[n]<f){e[i]=n,s.push(i);continue}for(r=0,o=s.length-1;r<o;)a=r+o>>1,t[s[a]]<f?r=a+1:o=a;f<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function Zr(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Zr(e)}function An(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const tl=Symbol.for("v-scx"),sl=()=>Ts(tl);function ci(t,e,s){return eo(t,e,s)}function eo(t,e,s=W){const{immediate:i,deep:n,flush:r,once:o}=s,a=le({},s),l=e&&i||!e&&r!=="post";let f;if(cs){if(r==="sync"){const w=sl();f=w.__watcherHandles||(w.__watcherHandles=[])}else if(!l){const w=()=>{};return w.stop=Le,w.resume=Le,w.pause=Le,w}}const u=fe;a.call=(w,y,x)=>We(w,u,y,x);let d=!1;r==="post"?a.scheduler=w=>{Ee(w,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(w,y)=>{y?w():sn(w)}),a.augmentJob=w=>{e&&(w.flags|=4),d&&(w.flags|=2,u&&(w.id=u.uid,w.i=u))};const p=da(t,e,a);return cs&&(f?f.push(p):l&&p()),p}function il(t,e,s){const i=this.proxy,n=ne(t)?t.includes(".")?to(i,t):()=>i[t]:t.bind(i,i);let r;B(e)?r=e:(r=e.handler,s=e);const o=fs(this),a=eo(n,r.bind(i),s);return o(),a}function to(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const nl=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Oe(e)}Modifiers`]||t[`${lt(e)}Modifiers`];function rl(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||W;let n=s;const r=e.startsWith("update:"),o=r&&nl(i,e.slice(7));o&&(o.trim&&(n=s.map(u=>ne(u)?u.trim():u)),o.number&&(n=s.map(Ei)));let a,l=i[a=si(e)]||i[a=si(Oe(e))];!l&&r&&(l=i[a=si(lt(e))]),l&&We(l,t,6,n);const f=i[a+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,We(f,t,6,n)}}function so(t,e,s=!1){const i=e.emitsCache,n=i.get(t);if(n!==void 0)return n;const r=t.emits;let o={},a=!1;if(!B(t)){const l=f=>{const u=so(f,e,!0);u&&(a=!0,le(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(ee(t)&&i.set(t,null),null):(N(r)?r.forEach(l=>o[l]=null):le(o,r),ee(t)&&i.set(t,o),o)}function Gs(t,e){return!t||!Us(e)?!1:(e=e.slice(2).replace(/Once$/,""),V(t,e[0].toLowerCase()+e.slice(1))||V(t,lt(e))||V(t,e))}function ui(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:l,render:f,renderCache:u,props:d,data:p,setupState:w,ctx:y,inheritAttrs:x}=t,D=Ms(t);let M,H;try{if(s.shapeFlag&4){const A=n||i,K=A;M=$e(f.call(K,A,u,d,w,p,y)),H=a}else{const A=e;M=$e(A.length>1?A(d,{attrs:a,slots:o,emit:l}):A(d,null)),H=e.props?a:ol(a)}}catch(A){is.length=0,js(A,t,1),M=Ne(Et)}let k=M;if(H&&x!==!1){const A=Object.keys(H),{shapeFlag:K}=k;A.length&&K&7&&(r&&A.some(Ki)&&(H=al(H,r)),k=Mt(k,H,!1,!0))}return s.dirs&&(k=Mt(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(s.dirs):s.dirs),s.transition&&nn(k,s.transition),M=k,Ms(D),M}const ol=t=>{let e;for(const s in t)(s==="class"||s==="style"||Us(s))&&((e||(e={}))[s]=t[s]);return e},al=(t,e)=>{const s={};for(const i in t)(!Ki(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function ll(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:a,patchFlag:l}=e,f=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return i?In(i,o,f):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const p=u[d];if(o[p]!==i[p]&&!Gs(f,p))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?In(i,o,f):!0:!!o;return!1}function In(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!Gs(s,r))return!0}return!1}function cl({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const io=t=>t.__isSuspense;function ul(t,e){e&&e.pendingBranch?N(t)?e.effects.push(...t):e.effects.push(t):ba(t)}const Qe=Symbol.for("v-fgt"),zs=Symbol.for("v-txt"),Et=Symbol.for("v-cmt"),hi=Symbol.for("v-stc"),is=[];let ke=null;function Ve(t=!1){is.push(ke=t?null:[])}function hl(){is.pop(),ke=is[is.length-1]||null}let ls=1;function On(t,e=!1){ls+=t,t<0&&ke&&e&&(ke.hasOnce=!0)}function no(t){return t.dynamicChildren=ls>0?ke||At:null,hl(),ls>0&&ke&&ke.push(t),t}function Xe(t,e,s,i,n,r){return no(Z(t,e,s,i,n,r,!0))}function fl(t,e,s,i,n){return no(Ne(t,e,s,i,n,!0))}function ro(t){return t?t.__v_isVNode===!0:!1}function Vt(t,e){return t.type===e.type&&t.key===e.key}const oo=({key:t})=>t??null,xs=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ne(t)||me(t)||B(t)?{i:xe,r:t,k:e,f:!!s}:t:null);function Z(t,e=null,s=null,i=0,n=null,r=t===Qe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&oo(e),ref:e&&xs(e),scopeId:Lr,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:xe};return a?(an(l,s),r&128&&t.normalize(l)):s&&(l.shapeFlag|=ne(s)?8:16),ls>0&&!o&&ke&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ke.push(l),l}const Ne=dl;function dl(t,e=null,s=null,i=0,n=null,r=!1){if((!t||t===La)&&(t=Et),ro(t)){const a=Mt(t,e,!0);return s&&an(a,s),ls>0&&!r&&ke&&(a.shapeFlag&6?ke[ke.indexOf(t)]=a:ke.push(a)),a.patchFlag=-2,a}if(xl(t)&&(t=t.__vccOpts),e){e=pl(e);let{class:a,style:l}=e;a&&!ne(a)&&(e.class=ns(a)),ee(l)&&(tn(l)&&!N(l)&&(l=le({},l)),e.style=Gi(l))}const o=ne(t)?1:io(t)?128:wa(t)?64:ee(t)?4:B(t)?2:0;return Z(t,e,s,i,n,o,r,!0)}function pl(t){return t?tn(t)||jr(t)?le({},t):t:null}function Mt(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:l}=t,f=e?bl(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&oo(f),ref:e&&e.ref?s&&r?N(r)?r.concat(xs(e)):[r,xs(e)]:xs(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Qe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mt(t.ssContent),ssFallback:t.ssFallback&&Mt(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&nn(u,l.clone(u)),u}function gl(t=" ",e=0){return Ne(zs,null,t,e)}function ml(t="",e=!1){return e?(Ve(),fl(Et,null,t)):Ne(Et,null,t)}function $e(t){return t==null||typeof t=="boolean"?Ne(Et):N(t)?Ne(Qe,null,t.slice()):ro(t)?nt(t):Ne(zs,null,String(t))}function nt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Mt(t)}function an(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(N(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),an(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!jr(e)?e._ctx=xe:n===3&&xe&&(xe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else B(e)?(e={default:e,_ctx:xe},s=32):(e=String(e),i&64?(s=16,e=[gl(e)]):s=8);t.children=e,t.shapeFlag|=s}function bl(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=ns([e.class,i.class]));else if(n==="style")e.style=Gi([e.style,i.style]);else if(Us(n)){const r=e[n],o=i[n];o&&r!==o&&!(N(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function Fe(t,e,s,i=null){We(t,e,7,[s,i])}const _l=Vr();let vl=0;function yl(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||_l,r={uid:vl++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uo(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gr(i,n),emitsOptions:so(i,n),emit:null,emitted:null,propsDefaults:W,inheritAttrs:i.inheritAttrs,ctx:W,data:W,props:W,attrs:W,slots:W,refs:W,setupState:W,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=rl.bind(null,r),t.ce&&t.ce(r),r}let fe=null,Ds,qi;{const t=Ks(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Ds=e("__VUE_INSTANCE_SETTERS__",s=>fe=s),qi=e("__VUE_SSR_SETTERS__",s=>cs=s)}const fs=t=>{const e=fe;return Ds(t),t.scope.on(),()=>{t.scope.off(),Ds(e)}},Rn=()=>{fe&&fe.scope.off(),Ds(null)};function ao(t){return t.vnode.shapeFlag&4}let cs=!1;function wl(t,e=!1,s=!1){e&&qi(e);const{props:i,children:n}=t.vnode,r=ao(t);ja(t,i,r,e),Ya(t,n,s);const o=r?Sl(t,e):void 0;return e&&qi(!1),o}function Sl(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Na);const{setup:i}=s;if(i){ct();const n=t.setupContext=i.length>1?Cl(t):null,r=fs(t),o=hs(i,t,0,[t.props,n]),a=or(o);if(ut(),r(),(a||t.sp)&&!ts(t)&&Mr(t),a){if(o.then(Rn,Rn),e)return o.then(l=>{qn(t,l,e)}).catch(l=>{js(l,t,0)});t.asyncDep=o}else qn(t,o,e)}else lo(t,e)}function qn(t,e,s){B(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ee(e)&&(t.setupState=Ar(e)),lo(t,s)}let Ln;function lo(t,e,s){const i=t.type;if(!t.render){if(!e&&Ln&&!i.render){const n=i.template||rn(t).template;if(n){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,f=le(le({isCustomElement:r,delimiters:a},o),l);i.render=Ln(n,f)}}t.render=i.render||Le}{const n=fs(t);ct();try{Ba(t)}finally{ut(),n()}}}const El={get(t,e){return he(t,"get",""),t[e]}};function Cl(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,El),slots:t.slots,emit:t.emit,expose:e}}function Ys(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ar(aa(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in ss)return ss[s](t)},has(e,s){return s in e||s in ss}})):t.proxy}function Tl(t,e=!0){return B(t)?t.displayName||t.name:t.name||e&&t.__name}function xl(t){return B(t)&&"__vccOpts"in t}const kl=(t,e)=>ha(t,e,cs),Pl="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Li;const Mn=typeof window<"u"&&window.trustedTypes;if(Mn)try{Li=Mn.createPolicy("vue",{createHTML:t=>t})}catch{}const co=Li?t=>Li.createHTML(t):t=>t,Al="http://www.w3.org/2000/svg",Il="http://www.w3.org/1998/Math/MathML",Ye=typeof document<"u"?document:null,Nn=Ye&&Ye.createElement("template"),Ol={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?Ye.createElementNS(Al,t):e==="mathml"?Ye.createElementNS(Il,t):s?Ye.createElement(t,{is:s}):Ye.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>Ye.createTextNode(t),createComment:t=>Ye.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ye.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{Nn.innerHTML=co(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const a=Nn.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Rl=Symbol("_vtc");function ql(t,e,s){const i=t[Rl];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Bn=Symbol("_vod"),Ll=Symbol("_vsh"),Ml=Symbol(""),Nl=/(^|;)\s*display\s*:/;function Bl(t,e,s){const i=t.style,n=ne(s);let r=!1;if(s&&!n){if(e)if(ne(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&ks(i,a,"")}else for(const o in e)s[o]==null&&ks(i,o,"");for(const o in s)o==="display"&&(r=!0),ks(i,o,s[o])}else if(n){if(e!==s){const o=i[Ml];o&&(s+=";"+o),i.cssText=s,r=Nl.test(s)}}else e&&t.removeAttribute("style");Bn in t&&(t[Bn]=r?i.display:"",t[Ll]&&(i.display="none"))}const Dn=/\s*!important$/;function ks(t,e,s){if(N(s))s.forEach(i=>ks(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=Dl(t,e);Dn.test(s)?t.setProperty(lt(i),s.replace(Dn,""),"important"):t[i]=s}}const Fn=["Webkit","Moz","ms"],fi={};function Dl(t,e){const s=fi[e];if(s)return s;let i=Oe(e);if(i!=="filter"&&i in t)return fi[e]=i;i=$s(i);for(let n=0;n<Fn.length;n++){const r=Fn[n]+i;if(r in t)return fi[e]=r}return e}const Un="http://www.w3.org/1999/xlink";function Hn(t,e,s,i,n,r=Fo(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Un,e.slice(6,e.length)):t.setAttributeNS(Un,e,s):s==null||r&&!ur(s)?t.removeAttribute(e):t.setAttribute(e,r?"":at(s)?String(s):s)}function Vn(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?co(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=ur(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function kt(t,e,s,i){t.addEventListener(e,s,i)}function Fl(t,e,s,i){t.removeEventListener(e,s,i)}const $n=Symbol("_vei");function Ul(t,e,s,i,n=null){const r=t[$n]||(t[$n]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=Hl(e);if(i){const f=r[e]=Kl(i,n);kt(t,a,f,l)}else o&&(Fl(t,a,o,l),r[e]=void 0)}}const Kn=/(?:Once|Passive|Capture)$/;function Hl(t){let e;if(Kn.test(t)){e={};let i;for(;i=t.match(Kn);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):lt(t.slice(2)),e]}let di=0;const Vl=Promise.resolve(),$l=()=>di||(Vl.then(()=>di=0),di=Date.now());function Kl(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;We(jl(i,s.value),e,5,[i])};return s.value=t,s.attached=$l(),s}function jl(t,e){if(N(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const jn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Wl=(t,e,s,i,n,r)=>{const o=n==="svg";e==="class"?ql(t,i,o):e==="style"?Bl(t,s,i):Us(e)?Ki(e)||Ul(t,e,s,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gl(t,e,i,o))?(Vn(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Hn(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ne(i))?Vn(t,Oe(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Hn(t,e,i,o))};function Gl(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&jn(e)&&B(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return jn(e)&&ne(s)?!1:e in t}const Wn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return N(e)?s=>Cs(e,s):e};function zl(t){t.target.composing=!0}function Gn(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pi=Symbol("_assign"),Yl={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[pi]=Wn(n);const r=i||n.props&&n.props.type==="number";kt(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),r&&(a=Ei(a)),t[pi](a)}),s&&kt(t,"change",()=>{t.value=t.value.trim()}),e||(kt(t,"compositionstart",zl),kt(t,"compositionend",Gn),kt(t,"change",Gn))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:r}},o){if(t[pi]=Wn(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?Ei(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===l)||(t.value=l))}},Ql={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Xl=(t,e)=>{const s=t._withKeys||(t._withKeys={}),i=e.join(".");return s[i]||(s[i]=n=>{if(!("key"in n))return;const r=lt(n.key);if(e.some(o=>o===r||Ql[o]===r))return t(n)})},Jl=le({patchProp:Wl},Ol);let zn;function Zl(){return zn||(zn=Xa(Jl))}const ec=(...t)=>{const e=Zl().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=sc(i);if(!n)return;const r=e._component;!B(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,tc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function tc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function sc(t){return ne(t)?document.querySelector(t):t}const Ge=Object.create(null);Ge.open="0";Ge.close="1";Ge.ping="2";Ge.pong="3";Ge.message="4";Ge.upgrade="5";Ge.noop="6";const Ps=Object.create(null);Object.keys(Ge).forEach(t=>{Ps[Ge[t]]=t});const Mi={type:"error",data:"parser error"},uo=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ho=typeof ArrayBuffer=="function",fo=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ln=({type:t,data:e},s,i)=>uo&&e instanceof Blob?s?i(e):Yn(e,i):ho&&(e instanceof ArrayBuffer||fo(e))?s?i(e):Yn(new Blob([e]),i):i(Ge[t]+(e||"")),Yn=(t,e)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];e("b"+(i||""))},s.readAsDataURL(t)};function Qn(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let gi;function ic(t,e){if(uo&&t.data instanceof Blob)return t.data.arrayBuffer().then(Qn).then(e);if(ho&&(t.data instanceof ArrayBuffer||fo(t.data)))return e(Qn(t.data));ln(t,!1,s=>{gi||(gi=new TextEncoder),e(gi.encode(s))})}const Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Xn.length;t++)zt[Xn.charCodeAt(t)]=t;const nc=t=>{let e=t.length*.75,s=t.length,i,n=0,r,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),u=new Uint8Array(f);for(i=0;i<s;i+=4)r=zt[t.charCodeAt(i)],o=zt[t.charCodeAt(i+1)],a=zt[t.charCodeAt(i+2)],l=zt[t.charCodeAt(i+3)],u[n++]=r<<2|o>>4,u[n++]=(o&15)<<4|a>>2,u[n++]=(a&3)<<6|l&63;return f},rc=typeof ArrayBuffer=="function",cn=(t,e)=>{if(typeof t!="string")return{type:"message",data:po(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:oc(t.substring(1),e)}:Ps[s]?t.length>1?{type:Ps[s],data:t.substring(1)}:{type:Ps[s]}:Mi},oc=(t,e)=>{if(rc){const s=nc(t);return po(s,e)}else return{base64:!0,data:t}},po=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},go=String.fromCharCode(30),ac=(t,e)=>{const s=t.length,i=new Array(s);let n=0;t.forEach((r,o)=>{ln(r,!1,a=>{i[o]=a,++n===s&&e(i.join(go))})})},lc=(t,e)=>{const s=t.split(go),i=[];for(let n=0;n<s.length;n++){const r=cn(s[n],e);if(i.push(r),r.type==="error")break}return i};function cc(){return new TransformStream({transform(t,e){ic(t,s=>{const i=s.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(s)})}})}let mi;function ys(t){return t.reduce((e,s)=>e+s.length,0)}function ws(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let i=0;for(let n=0;n<e;n++)s[n]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),s}function uc(t,e){mi||(mi=new TextDecoder);const s=[];let i=0,n=-1,r=!1;return new TransformStream({transform(o,a){for(s.push(o);;){if(i===0){if(ys(s)<1)break;const l=ws(s,1);r=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(ys(s)<2)break;const l=ws(s,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(ys(s)<8)break;const l=ws(s,8),f=new DataView(l.buffer,l.byteOffset,l.length),u=f.getUint32(0);if(u>Math.pow(2,53-32)-1){a.enqueue(Mi);break}n=u*Math.pow(2,32)+f.getUint32(4),i=3}else{if(ys(s)<n)break;const l=ws(s,n);a.enqueue(cn(r?l:mi.decode(l),e)),i=0}if(n===0||n>t){a.enqueue(Mi);break}}}})}const mo=4;function se(t){if(t)return hc(t)}function hc(t){for(var e in se.prototype)t[e]=se.prototype[e];return t}se.prototype.on=se.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};se.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};se.prototype.off=se.prototype.removeListener=se.prototype.removeAllListeners=se.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,n=0;n<s.length;n++)if(i=s[n],i===e||i.fn===e){s.splice(n,1);break}return s.length===0&&delete this._callbacks["$"+t],this};se.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,n=s.length;i<n;++i)s[i].apply(this,e)}return this};se.prototype.emitReserved=se.prototype.emit;se.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};se.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Qs=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0))(),Ie=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),fc="arraybuffer";function bo(t,...e){return e.reduce((s,i)=>(t.hasOwnProperty(i)&&(s[i]=t[i]),s),{})}const dc=Ie.setTimeout,pc=Ie.clearTimeout;function Xs(t,e){e.useNativeTimers?(t.setTimeoutFn=dc.bind(Ie),t.clearTimeoutFn=pc.bind(Ie)):(t.setTimeoutFn=Ie.setTimeout.bind(Ie),t.clearTimeoutFn=Ie.clearTimeout.bind(Ie))}const gc=1.33;function mc(t){return typeof t=="string"?bc(t):Math.ceil((t.byteLength||t.size)*gc)}function bc(t){let e=0,s=0;for(let i=0,n=t.length;i<n;i++)e=t.charCodeAt(i),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(i++,s+=4);return s}function _o(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _c(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function vc(t){let e={},s=t.split("&");for(let i=0,n=s.length;i<n;i++){let r=s[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class yc extends Error{constructor(e,s,i){super(e),this.description=s,this.context=i,this.type="TransportError"}}class un extends se{constructor(e){super(),this.writable=!1,Xs(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,i){return super.emitReserved("error",new yc(e,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=cn(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=_c(e);return s.length?"?"+s:""}}class wc extends un{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};lc(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ac(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=_o()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let vo=!1;try{vo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Sc=vo;function Ec(){}class Cc extends wc{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,s){const i=this.request({method:"POST",data:e});i.on("success",s),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=e}}class je extends se{constructor(e,s,i){super(),this.createRequest=e,Xs(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const s=bo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=je.requestsCount++,je.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ec,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete je.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}je.requestsCount=0;je.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Jn);else if(typeof addEventListener=="function"){const t="onpagehide"in Ie?"pagehide":"unload";addEventListener(t,Jn,!1)}}function Jn(){for(let t in je.requests)je.requests.hasOwnProperty(t)&&je.requests[t].abort()}const Tc=function(){const t=yo({xdomain:!1});return t&&t.responseType!==null}();class xc extends Cc{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=Tc&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new je(yo,this.uri(),e)}}function yo(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Sc))return new XMLHttpRequest}catch{}if(!e)try{return new Ie[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const wo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class kc extends un{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,i=wo?{}:bo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const i=e[s],n=s===e.length-1;ln(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&Qs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=_o()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const bi=Ie.WebSocket||Ie.MozWebSocket;class Pc extends kc{createSocket(e,s,i){return wo?new bi(e,s,i):s?new bi(e,s):new bi(e)}doWrite(e,s){this.ws.send(s)}}class Ac extends un{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=uc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(s).getReader(),n=cc();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const i=e[s],n=s===e.length-1;this._writer.write(i).then(()=>{n&&Qs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ic={websocket:Pc,webtransport:Ac,polling:xc},Oc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Rc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ni(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),i=t.indexOf("]");s!=-1&&i!=-1&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let n=Oc.exec(t||""),r={},o=14;for(;o--;)r[Rc[o]]=n[o]||"";return s!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=qc(r,r.path),r.queryKey=Lc(r,r.query),r}function qc(t,e){const s=/\/{2,9}/g,i=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Lc(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(s[n]=r)}),s}const Bi=typeof addEventListener=="function"&&typeof removeEventListener=="function",As=[];Bi&&addEventListener("offline",()=>{As.forEach(t=>t())},!1);class ot extends se{constructor(e,s){if(super(),this.binaryType=fc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const i=Ni(e);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=Ni(s.host).host);Xs(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=vc(this.opts.query)),Bi&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},As.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=mo,s.transport=e,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ot.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",ot.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(s+=mc(n)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Qs(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,i){return this._sendPacket("message",e,s,i),this}send(e,s,i){return this._sendPacket("message",e,s,i),this}_sendPacket(e,s,i,n){if(typeof s=="function"&&(n=s,s=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:s,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(ot.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Bi&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=As.indexOf(this._offlineEventListener);i!==-1&&As.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}ot.protocol=mo;class Mc extends ot{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),i=!1;ot.priorWebsocketSuccess=!1;const n=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;ot.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=s.name,this.emitReserved("upgradeError",p)}}))};function r(){i||(i=!0,u(),s.close(),s=null)}const o=d=>{const p=new Error("probe error: "+d);p.transport=s.name,r(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function l(){o("socket closed")}function f(d){s&&d.name!==s.name&&r()}const u=()=>{s.removeListener("open",n),s.removeListener("error",o),s.removeListener("close",a),this.off("close",l),this.off("upgrading",f)};s.once("open",n),s.once("error",o),s.once("close",a),this.once("close",l),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&s.push(e[i]);return s}}let Nc=class extends Mc{constructor(e,s={}){const i=typeof e=="object"?e:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>Ic[n]).filter(n=>!!n)),super(e,i)}};function Bc(t,e="",s){let i=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),i=Ni(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(s&&s.port===i.port?"":":"+i.port),i}const Dc=typeof ArrayBuffer=="function",Fc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,So=Object.prototype.toString,Uc=typeof Blob=="function"||typeof Blob<"u"&&So.call(Blob)==="[object BlobConstructor]",Hc=typeof File=="function"||typeof File<"u"&&So.call(File)==="[object FileConstructor]";function hn(t){return Dc&&(t instanceof ArrayBuffer||Fc(t))||Uc&&t instanceof Blob||Hc&&t instanceof File}function Is(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,i=t.length;s<i;s++)if(Is(t[s]))return!0;return!1}if(hn(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Is(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Is(t[s]))return!0;return!1}function Vc(t){const e=[],s=t.data,i=t;return i.data=Di(s,e),i.attachments=e.length,{packet:i,buffers:e}}function Di(t,e){if(!t)return t;if(hn(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let i=0;i<t.length;i++)s[i]=Di(t[i],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=Di(t[i],e));return s}return t}function $c(t,e){return t.data=Fi(t.data,e),delete t.attachments,t}function Fi(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Fi(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Fi(t[s],e));return t}const Kc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jc=5;var F;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(F||(F={}));class Wc{constructor(e){this.replacer=e}encode(e){return(e.type===F.EVENT||e.type===F.ACK)&&Is(e)?this.encodeAsBinary({type:e.type===F.EVENT?F.BINARY_EVENT:F.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===F.BINARY_EVENT||e.type===F.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=Vc(e),i=this.encodeAsString(s.packet),n=s.buffers;return n.unshift(i),n}}function Zn(t){return Object.prototype.toString.call(t)==="[object Object]"}class fn extends se{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const i=s.type===F.BINARY_EVENT;i||s.type===F.BINARY_ACK?(s.type=i?F.EVENT:F.ACK,this.reconstructor=new Gc(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(hn(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const i={type:Number(e.charAt(0))};if(F[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===F.BINARY_EVENT||i.type===F.BINARY_ACK){const r=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const o=e.substring(r,s);if(o!=Number(o)||e.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(s+1)==="/"){const r=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););i.nsp=e.substring(r,s)}else i.nsp="/";const n=e.charAt(s+1);if(n!==""&&Number(n)==n){const r=s+1;for(;++s;){const o=e.charAt(s);if(o==null||Number(o)!=o){--s;break}if(s===e.length)break}i.id=Number(e.substring(r,s+1))}if(e.charAt(++s)){const r=this.tryParse(e.substr(s));if(fn.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case F.CONNECT:return Zn(s);case F.DISCONNECT:return s===void 0;case F.CONNECT_ERROR:return typeof s=="string"||Zn(s);case F.EVENT:case F.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Kc.indexOf(s[0])===-1);case F.ACK:case F.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Gc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=$c(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:fn,Encoder:Wc,get PacketType(){return F},protocol:jc},Symbol.toStringTag,{value:"Module"}));function qe(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Yc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Eo extends se{constructor(e,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[qe(e,"open",this.onopen.bind(this)),qe(e,"packet",this.onpacket.bind(this)),qe(e,"error",this.onerror.bind(this)),qe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var i,n,r;if(Yc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const o={type:F.EVENT,data:s};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,d=s.pop();this._registerAckCallback(u,d),o.id=u}const a=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,s){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[e]=s;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);s.call(this,new Error("operation has timed out"))},n),o=(...a)=>{this.io.clearTimeoutFn(r),s.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...s){return new Promise((i,n)=>{const r=(o,a)=>o?n(o):i(a);r.withError=!0,s.push(r),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...r)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(n)):(this._queue.shift(),s&&s(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:F.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case F.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case F.EVENT:case F.BINARY_EVENT:this.onevent(e);break;case F.ACK:case F.BINARY_ACK:this.onack(e);break;case F.DISCONNECT:this.ondisconnect();break;case F.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let i=!1;return function(...n){i||(i=!0,s.packet({type:F.ACK,id:e,data:n}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:F.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(e===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(e===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,e.data)}}}function Nt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Nt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+s:t-s}return Math.min(t,this.max)|0};Nt.prototype.reset=function(){this.attempts=0};Nt.prototype.setMin=function(t){this.ms=t};Nt.prototype.setMax=function(t){this.max=t};Nt.prototype.setJitter=function(t){this.jitter=t};class Ui extends se{constructor(e,s){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Xs(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Nt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const n=s.parser||zc;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Nc(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=qe(s,"open",function(){i.onopen(),e&&e()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=qe(s,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),s.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(qe(e,"ping",this.onping.bind(this)),qe(e,"data",this.ondata.bind(this)),qe(e,"error",this.onerror.bind(this)),qe(e,"close",this.onclose.bind(this)),qe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){Qs(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new Eo(this,e,s),this.nsps[e]=i),i}_destroy(e){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let i=0;i<s.length;i++)this.engine.write(s[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $t={};function Os(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=Bc(t,e.path||"/socket.io"),i=s.source,n=s.id,r=s.path,o=$t[n]&&r in $t[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Ui(i,e):($t[n]||($t[n]=new Ui(i,e)),l=$t[n]),s.query&&!e.query&&(e.query=s.queryKey),l.socket(s.path,e)}Object.assign(Os,{Manager:Ui,Socket:Eo,io:Os,connect:Os});/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const ue="w",Ae="b",re="p",Hi="n",Rs="b",Yt="r",rt="q",ie="k",_i="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Ss{constructor(e,s){X(this,"color");X(this,"from");X(this,"to");X(this,"piece");X(this,"captured");X(this,"promotion");X(this,"flags");X(this,"san");X(this,"lan");X(this,"before");X(this,"after");const{color:i,piece:n,from:r,to:o,flags:a,captured:l,promotion:f}=s,u=ae(r),d=ae(o);this.color=i,this.piece=n,this.from=u,this.to=d,this.san=e._moveToSan(s,e._moves({legal:!0})),this.lan=u+d,this.before=e.fen(),e._makeMove(s),this.after=e.fen(),e._undoMove(),this.flags="";for(const p in L)L[p]&a&&(this.flags+=bt[p]);l&&(this.captured=l),f&&(this.promotion=f,this.lan+=f)}isCapture(){return this.flags.indexOf(bt.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(bt.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(bt.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(bt.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(bt.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(bt.BIG_PAWN)>-1}}const be=-1,bt={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},L={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Vi={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Qc={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},Xc={...Vi,...Qc},R={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},vi={b:[16,32,17,15],w:[-16,-32,-17,-15]},er={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Jc=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Zc=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],eu={p:1,n:2,b:4,r:8,q:16,k:32},tu="pnbrqkPNBRQK",tr=[Hi,Rs,Yt,rt],su=7,iu=6,nu=1,ru=0,Es={[ie]:L.KSIDE_CASTLE,[rt]:L.QSIDE_CASTLE},tt={w:[{square:R.a1,flag:L.QSIDE_CASTLE},{square:R.h1,flag:L.KSIDE_CASTLE}],b:[{square:R.a8,flag:L.QSIDE_CASTLE},{square:R.h8,flag:L.KSIDE_CASTLE}]},ou={b:nu,w:iu},au=["1-0","0-1","1/2-1/2","*"];function St(t){return t>>4}function us(t){return t&15}function Co(t){return"0123456789".indexOf(t)!==-1}function ae(t){const e=us(t),s=St(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(s,s+1)}function Kt(t){return t===ue?Ae:ue}function lu(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const s=parseInt(e[5],10);if(isNaN(s)||s<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const i=parseInt(e[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const n=e[0].split("/");if(n.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<n.length;o++){let a=0,l=!1;for(let f=0;f<n[o].length;f++)if(Co(n[o][f])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(n[o][f],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(n[o][f]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of r){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(n[0]+n[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function cu(t,e){const s=t.from,i=t.to,n=t.piece;let r=0,o=0,a=0;for(let l=0,f=e.length;l<f;l++){const u=e[l].from,d=e[l].to,p=e[l].piece;n===p&&s!==u&&i===d&&(r++,St(s)===St(u)&&o++,us(s)===us(u)&&a++)}return r>0?o>0&&a>0?ae(s):a>0?ae(s).charAt(1):ae(s).charAt(0):""}function st(t,e,s,i,n,r=void 0,o=L.NORMAL){const a=St(i);if(n===re&&(a===su||a===ru))for(let l=0;l<tr.length;l++){const f=tr[l];t.push({color:e,from:s,to:i,piece:n,captured:r,promotion:f,flags:o|L.PROMOTION})}else t.push({color:e,from:s,to:i,piece:n,captured:r,flags:o})}function sr(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:re:(e=e.toLowerCase(),e==="o"?ie:e)}function yi(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function wi(t){return t.split(" ").slice(0,4).join(" ")}class uu{constructor(e=_i,{skipValidation:s=!1}={}){X(this,"_board",new Array(128));X(this,"_turn",ue);X(this,"_header",{});X(this,"_kings",{w:be,b:be});X(this,"_epSquare",-1);X(this,"_halfMoves",0);X(this,"_moveNumber",0);X(this,"_history",[]);X(this,"_comments",{});X(this,"_castling",{w:0,b:0});X(this,"_positionCount",{});this.load(e,{skipValidation:s})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:be,b:be},this._turn=ue,this._castling={w:0,b:0},this._epSquare=be,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...Xc},this._positionCount={},this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:s=!1,preserveHeaders:i=!1}={}){let n=e.split(/\s+/);if(n.length>=2&&n.length<6){const a=["-","-","0","1"];e=n.concat(a.slice(-(6-n.length))).join(" ")}if(n=e.split(/\s+/),!s){const{ok:a,error:l}=lu(e);if(!a)throw new Error(l)}const r=n[0];let o=0;this.clear({preserveHeaders:i});for(let a=0;a<r.length;a++){const l=r.charAt(a);if(l==="/")o+=8;else if(Co(l))o+=parseInt(l,10);else{const f=l<"a"?ue:Ae;this._put({type:l.toLowerCase(),color:f},ae(o)),o++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=L.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=L.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=L.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=L.QSIDE_CASTLE),this._epSquare=n[3]==="-"?be:R[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var r,o;let e=0,s="";for(let a=R.a8;a<=R.h1;a++){if(this._board[a]){e>0&&(s+=e,e=0);const{color:l,type:f}=this._board[a];s+=l===ue?f.toUpperCase():f.toLowerCase()}else e++;a+1&136&&(e>0&&(s+=e),a!==R.h1&&(s+="/"),e=0,a+=8)}let i="";this._castling[ue]&L.KSIDE_CASTLE&&(i+="K"),this._castling[ue]&L.QSIDE_CASTLE&&(i+="Q"),this._castling[Ae]&L.KSIDE_CASTLE&&(i+="k"),this._castling[Ae]&L.QSIDE_CASTLE&&(i+="q"),i=i||"-";let n="-";if(this._epSquare!==be){const a=this._epSquare+(this._turn===ue?16:-16),l=[a+1,a-1];for(const f of l){if(f&136)continue;const u=this._turn;if(((r=this._board[f])==null?void 0:r.color)===u&&((o=this._board[f])==null?void 0:o.type)===re){this._makeMove({color:u,from:f,to:this._epSquare,piece:re,captured:re,flags:L.EP_CAPTURE});const d=!this._isKingAttacked(u);if(this._undoMove(),d){n=ae(this._epSquare);break}}}}return[s,this._turn,i,n,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==_i?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(_i)}get(e){return this._board[R[e]]}findPiece(e){var i;const s=[];for(let n=R.a8;n<=R.h1;n++){if(n&136){n+=7;continue}!this._board[n]||((i=this._board[n])==null?void 0:i.color)!==e.color||this._board[n].color===e.color&&this._board[n].type===e.type&&s.push(ae(n))}return s}put({type:e,color:s},i){return this._put({type:e,color:s},i)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:s},i){if(tu.indexOf(e.toLowerCase())===-1||!(i in R))return!1;const n=R[i];if(e==ie&&!(this._kings[s]==be||this._kings[s]==n))return!1;const r=this._board[n];return r&&r.type===ie&&(this._kings[r.color]=be),this._board[n]={type:e,color:s},e===ie&&(this._kings[s]=n),!0}remove(e){const s=this.get(e);return delete this._board[R[e]],s&&s.type===ie&&(this._kings[s.color]=be),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),s}_updateCastlingRights(){var i,n,r,o,a,l,f,u,d,p,w,y;const e=((i=this._board[R.e1])==null?void 0:i.type)===ie&&((n=this._board[R.e1])==null?void 0:n.color)===ue,s=((r=this._board[R.e8])==null?void 0:r.type)===ie&&((o=this._board[R.e8])==null?void 0:o.color)===Ae;(!e||((a=this._board[R.a1])==null?void 0:a.type)!==Yt||((l=this._board[R.a1])==null?void 0:l.color)!==ue)&&(this._castling.w&=~L.QSIDE_CASTLE),(!e||((f=this._board[R.h1])==null?void 0:f.type)!==Yt||((u=this._board[R.h1])==null?void 0:u.color)!==ue)&&(this._castling.w&=~L.KSIDE_CASTLE),(!s||((d=this._board[R.a8])==null?void 0:d.type)!==Yt||((p=this._board[R.a8])==null?void 0:p.color)!==Ae)&&(this._castling.b&=~L.QSIDE_CASTLE),(!s||((w=this._board[R.h8])==null?void 0:w.type)!==Yt||((y=this._board[R.h8])==null?void 0:y.color)!==Ae)&&(this._castling.b&=~L.KSIDE_CASTLE)}_updateEnPassantSquare(){var r,o;if(this._epSquare===be)return;const e=this._epSquare+(this._turn===ue?-16:16),s=this._epSquare+(this._turn===ue?16:-16),i=[s+1,s-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((r=this._board[s])==null?void 0:r.color)!==Kt(this._turn)||((o=this._board[s])==null?void 0:o.type)!==re){this._epSquare=be;return}const n=a=>{var l,f;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((f=this._board[a])==null?void 0:f.type)===re};i.some(n)||(this._epSquare=be)}_attacked(e,s,i){const n=[];for(let r=R.a8;r<=R.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const o=this._board[r],a=r-s;if(a===0)continue;const l=a+119;if(Jc[l]&eu[o.type]){if(o.type===re){if(a>0&&o.color===ue||a<=0&&o.color===Ae)if(i)n.push(ae(r));else return!0;continue}if(o.type==="n"||o.type==="k")if(i){n.push(ae(r));continue}else return!0;const f=Zc[l];let u=r+f,d=!1;for(;u!==s;){if(this._board[u]!=null){d=!0;break}u+=f}if(!d)if(i){n.push(ae(r));continue}else return!0}}return i?n:!1}attackers(e,s){return s?this._attacked(s,R[e],!0):this._attacked(this._turn,R[e],!0)}_isKingAttacked(e){const s=this._kings[e];return s===-1?!1:this._attacked(Kt(e),s)}isAttacked(e,s){return this._attacked(s,R[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},s=[];let i=0,n=0;for(let r=R.a8;r<=R.h1;r++){if(n=(n+1)%2,r&136){r+=7;continue}const o=this._board[r];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===Rs&&s.push(n),i++)}if(i===2)return!0;if(i===3&&(e[Rs]===1||e[Hi]===1))return!0;if(i===e[Rs]+2){let r=0;const o=s.length;for(let a=0;a<o;a++)r+=s[a];if(r===0||r===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:s=void 0,piece:i=void 0}={}){const n=this._moves({square:s,piece:i});return e?n.map(r=>new Ss(this,r)):n.map(r=>this._moveToSan(r,n))}_moves({legal:e=!0,piece:s=void 0,square:i=void 0}={}){var w;const n=i?i.toLowerCase():void 0,r=s==null?void 0:s.toLowerCase(),o=[],a=this._turn,l=Kt(a);let f=R.a8,u=R.h1,d=!1;if(n)if(n in R)f=u=R[n],d=!0;else return[];for(let y=f;y<=u;y++){if(y&136){y+=7;continue}if(!this._board[y]||this._board[y].color===l)continue;const{type:x}=this._board[y];let D;if(x===re){if(r&&r!==x)continue;D=y+vi[a][0],this._board[D]||(st(o,a,y,D,re),D=y+vi[a][1],ou[a]===St(y)&&!this._board[D]&&st(o,a,y,D,re,void 0,L.BIG_PAWN));for(let M=2;M<4;M++)D=y+vi[a][M],!(D&136)&&(((w=this._board[D])==null?void 0:w.color)===l?st(o,a,y,D,re,this._board[D].type,L.CAPTURE):D===this._epSquare&&st(o,a,y,D,re,re,L.EP_CAPTURE))}else{if(r&&r!==x)continue;for(let M=0,H=er[x].length;M<H;M++){const k=er[x][M];for(D=y;D+=k,!(D&136);){if(!this._board[D])st(o,a,y,D,x);else{if(this._board[D].color===a)break;st(o,a,y,D,x,this._board[D].type,L.CAPTURE);break}if(x===Hi||x===ie)break}}}}if((r===void 0||r===ie)&&(!d||u===this._kings[a])){if(this._castling[a]&L.KSIDE_CASTLE){const y=this._kings[a],x=y+2;!this._board[y+1]&&!this._board[x]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,y+1)&&!this._attacked(l,x)&&st(o,a,this._kings[a],x,ie,void 0,L.KSIDE_CASTLE)}if(this._castling[a]&L.QSIDE_CASTLE){const y=this._kings[a],x=y-2;!this._board[y-1]&&!this._board[y-2]&&!this._board[y-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,y-1)&&!this._attacked(l,x)&&st(o,a,this._kings[a],x,ie,void 0,L.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const p=[];for(let y=0,x=o.length;y<x;y++)this._makeMove(o[y]),this._isKingAttacked(a)||p.push(o[y]),this._undoMove();return p}move(e,{strict:s=!1}={}){let i=null;if(typeof e=="string")i=this._moveFromSan(e,s);else if(typeof e=="object"){const r=this._moves();for(let o=0,a=r.length;o<a;o++)if(e.from===ae(r[o].from)&&e.to===ae(r[o].to)&&(!("promotion"in r[o])||e.promotion===r[o].promotion)){i=r[o];break}}if(!i)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const n=new Ss(this,i);return this._makeMove(i),this._incPositionCount(n.after),n}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const s=this._turn,i=Kt(s);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&L.EP_CAPTURE&&(this._turn===Ae?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:s}),this._board[e.to].type===ie){if(this._kings[s]=e.to,e.flags&L.KSIDE_CASTLE){const n=e.to-1,r=e.to+1;this._board[n]=this._board[r],delete this._board[r]}else if(e.flags&L.QSIDE_CASTLE){const n=e.to+1,r=e.to-2;this._board[n]=this._board[r],delete this._board[r]}this._castling[s]=0}if(this._castling[s]){for(let n=0,r=tt[s].length;n<r;n++)if(e.from===tt[s][n].square&&this._castling[s]&tt[s][n].flag){this._castling[s]^=tt[s][n].flag;break}}if(this._castling[i]){for(let n=0,r=tt[i].length;n<r;n++)if(e.to===tt[i][n].square&&this._castling[i]&tt[i][n].flag){this._castling[i]^=tt[i][n].flag;break}}e.flags&L.BIG_PAWN?s===Ae?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=be,e.piece===re?this._halfMoves=0:e.flags&(L.CAPTURE|L.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,s===Ae&&this._moveNumber++,this._turn=i}undo(){const e=this._undoMove();if(e){const s=new Ss(this,e);return this._decPositionCount(s.after),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const s=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const i=this._turn,n=Kt(i);if(this._board[s.from]=this._board[s.to],this._board[s.from].type=s.piece,delete this._board[s.to],s.captured)if(s.flags&L.EP_CAPTURE){let r;i===Ae?r=s.to-16:r=s.to+16,this._board[r]={type:re,color:n}}else this._board[s.to]={type:s.captured,color:n};if(s.flags&(L.KSIDE_CASTLE|L.QSIDE_CASTLE)){let r,o;s.flags&L.KSIDE_CASTLE?(r=s.to+1,o=s.to-1):(r=s.to-2,o=s.to+1),this._board[r]=this._board[o],delete this._board[o]}return s}pgn({newline:e=`
`,maxWidth:s=0}={}){const i=[];let n=!1;for(const p in this._header)this._header[p]&&i.push(`[${p} "${this._header[p]}"]`+e),n=!0;n&&this._history.length&&i.push(e);const r=p=>{const w=this._comments[this.fen()];if(typeof w<"u"){const y=p.length>0?" ":"";p=`${p}${y}{${w}}`}return p},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(r(""));o.length>0;){l=r(l);const p=o.pop();if(!p)break;if(!this._history.length&&p.color==="b"){const w=`${this._moveNumber}. ...`;l=l?`${l} ${w}`:w}else p.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(p,this._moves({legal:!0})),this._makeMove(p)}if(l.length&&a.push(r(l)),a.push(this._header.Result||"*"),s===0)return i.join("")+a.join(" ");const f=function(){return i.length>0&&i[i.length-1]===" "?(i.pop(),!0):!1},u=function(p,w){for(const y of w.split(" "))if(y){if(p+y.length>s){for(;f();)p--;i.push(e),p=0}i.push(y),p+=y.length,i.push(" "),p++}return f()&&p--,p};let d=0;for(let p=0;p<a.length;p++){if(d+a[p].length>s&&a[p].includes("{")){d=u(d,a[p]);continue}d+a[p].length>s&&p!==0?(i[i.length-1]===" "&&i.pop(),i.push(e),d=0):p!==0&&(i.push(" "),d++),i.push(a[p]),d+=a[p].length}return i.join("")}header(...e){for(let s=0;s<e.length;s+=2)typeof e[s]=="string"&&typeof e[s+1]=="string"&&(this._header[e[s]]=e[s+1]);return this._header}setHeader(e,s){return this._header[e]=s??Vi[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Vi[e]||null,!0):!1}getHeaders(){const e={};for(const[s,i]of Object.entries(this._header))i!==null&&(e[s]=i);return e}loadPgn(e,{strict:s=!1,newlineChar:i=`\r?
`}={}){function n(k){return k.replace(/\\/g,"\\")}function r(k){const A={},K=k.split(new RegExp(n(i)));let Pe="",_e="";for(let ve=0;ve<K.length;ve++){const ht=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Pe=K[ve].replace(ht,"$1"),_e=K[ve].replace(ht,"$2"),Pe.trim().length>0&&(A[Pe]=_e)}return A}e=e.trim();const a=new RegExp("^(\\[((?:"+n(i)+")|.)*\\])((?:\\s*"+n(i)+"){2}|(?:\\s*"+n(i)+")*$)").exec(e),l=a&&a.length>=2?a[1]:"";this.reset();const f=r(l);let u="";for(const k in f)k.toLowerCase()==="fen"&&(u=f[k]),this.header(k,f[k]);if(!s)u&&this.load(u,{preserveHeaders:!0});else if(f.SetUp==="1"){if(!("FEN"in f))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(f.FEN,{preserveHeaders:!0})}function d(k){return Array.from(k).map(function(A){return A.charCodeAt(0)<128?A.charCodeAt(0).toString(16):encodeURIComponent(A).replace(/%/g,"").toLowerCase()}).join("")}function p(k){return k.length==0?"":decodeURIComponent("%"+(k.match(/.{1,2}/g)||[]).join("%"))}const w=function(k){return k=k.replace(new RegExp(n(i),"g")," "),`{${d(k.slice(1,k.length-1))}}`},y=function(k){if(k.startsWith("{")&&k.endsWith("}"))return p(k.slice(1,k.length-1))};let x=e.replace(l,"").replace(new RegExp(`({[^}]*})+?|;([^${n(i)}]*)`,"g"),function(k,A,K){return A!==void 0?w(A):" "+w(`{${K.slice(1)}}`)}).replace(new RegExp(n(i),"g")," ");const D=/(\([^()]+\))+?/g;for(;D.test(x);)x=x.replace(D,"");x=x.replace(/\d+\.(\.\.)?/g,""),x=x.replace(/\.\.\./g,""),x=x.replace(/\$\d+/g,"");let M=x.trim().split(new RegExp(/\s+/));M=M.filter(k=>k!=="");let H="";for(let k=0;k<M.length;k++){const A=y(M[k]);if(A!==void 0){this._comments[this.fen()]=A;continue}const K=this._moveFromSan(M[k],s);if(K==null)if(au.indexOf(M[k])>-1)H=M[k];else throw new Error(`Invalid move in PGN: ${M[k]}`);else H="",this._makeMove(K),this._incPositionCount(this.fen())}H&&Object.keys(this._header).length&&this._header.Result!==H&&this.setHeader("Result",H)}_moveToSan(e,s){let i="";if(e.flags&L.KSIDE_CASTLE)i="O-O";else if(e.flags&L.QSIDE_CASTLE)i="O-O-O";else{if(e.piece!==re){const n=cu(e,s);i+=e.piece.toUpperCase()+n}e.flags&(L.CAPTURE|L.EP_CAPTURE)&&(e.piece===re&&(i+=ae(e.from)[0]),i+="x"),i+=ae(e.to),e.promotion&&(i+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?i+="#":i+="+"),this._undoMove(),i}_moveFromSan(e,s=!1){const i=yi(e);let n=sr(i),r=this._moves({legal:!0,piece:n});for(let p=0,w=r.length;p<w;p++)if(i===yi(this._moveToSan(r[p],r)))return r[p];if(s)return null;let o,a,l,f,u,d=!1;if(a=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],f=a[3],u=a[4],l.length==1&&(d=!0)):(a=i.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],f=a[3],u=a[4],l.length==1&&(d=!0))),n=sr(i),r=this._moves({legal:!0,piece:o||n}),!f)return null;for(let p=0,w=r.length;p<w;p++)if(l){if((!o||o.toLowerCase()==r[p].piece)&&R[l]==r[p].from&&R[f]==r[p].to&&(!u||u.toLowerCase()==r[p].promotion))return r[p];if(d){const y=ae(r[p].from);if((!o||o.toLowerCase()==r[p].piece)&&R[f]==r[p].to&&(l==y[0]||l==y[1])&&(!u||u.toLowerCase()==r[p].promotion))return r[p]}}else if(i===yi(this._moveToSan(r[p],r)).replace("x",""))return r[p];return null}ascii(){let e=`   +------------------------+
`;for(let s=R.a8;s<=R.h1;s++){if(us(s)===0&&(e+=" "+"87654321"[St(s)]+" |"),this._board[s]){const i=this._board[s].type,r=this._board[s].color===ue?i.toUpperCase():i.toLowerCase();e+=" "+r+" "}else e+=" . ";s+1&136&&(e+=`|
`,s+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const s=this._moves({legal:!1});let i=0;const n=this._turn;for(let r=0,o=s.length;r<o;r++)this._makeMove(s[r]),this._isKingAttacked(n)||(e-1>0?i+=this.perft(e-1):i++),this._undoMove();return i}turn(){return this._turn}board(){const e=[];let s=[];for(let i=R.a8;i<=R.h1;i++)this._board[i]==null?s.push(null):s.push({square:ae(i),type:this._board[i].type,color:this._board[i].color}),i+1&136&&(e.push(s),s=[],i+=8);return e}squareColor(e){if(e in R){const s=R[e];return(St(s)+us(s))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const s=[],i=[];for(;this._history.length>0;)s.push(this._undoMove());for(;;){const n=s.pop();if(!n)break;e?i.push(new Ss(this,n)):i.push(this._moveToSan(n,this._moves())),this._makeMove(n)}return i}_getPositionCount(e){const s=wi(e);return this._positionCount[s]||0}_incPositionCount(e){const s=wi(e);this._positionCount[s]===void 0&&(this._positionCount[s]=0),this._positionCount[s]+=1}_decPositionCount(e){const s=wi(e);this._positionCount[s]===1?delete this._positionCount[s]:this._positionCount[s]-=1}_pruneComments(){const e=[],s={},i=n=>{n in this._comments&&(s[n]=this._comments[n])};for(;this._history.length>0;)e.push(this._undoMove());for(i(this.fen());;){const n=e.pop();if(!n)break;this._makeMove(n),i(this.fen())}this._comments=s}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const s=this._comments[e];return delete this._comments[e],{fen:e,comment:s}})}setCastlingRights(e,s){for(const n of[ie,rt])s[n]!==void 0&&(s[n]?this._castling[e]|=Es[n]:this._castling[e]&=~Es[n]);this._updateCastlingRights();const i=this.getCastlingRights(e);return(s[ie]===void 0||s[ie]===i[ie])&&(s[rt]===void 0||s[rt]===i[rt])}getCastlingRights(e){return{[ie]:(this._castling[e]&Es[ie])!==0,[rt]:(this._castling[e]&Es[rt])!==0}}moveNumber(){return this._moveNumber}}const Fs={start:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",empty:"8/8/8/8/8/8/8/8"};class te{constructor(e=Fs.empty){this.squares=new Array(64).fill(null),this.setFen(e)}setFen(e=Fs.empty){const s=e.replace(/^\s*/,"").replace(/\s*$/,"").split(/\/|\s/);for(let i=0;i<8;i++){const n=s[7-i].replace(/\d/g,r=>{const o=parseInt(r);let a="";for(let l=0;l<o;l++)a+="-";return a});for(let r=0;r<8;r++){const o=n.substring(r,r+1);let a=null;o!=="-"&&(o.toUpperCase()===o?a=`w${o.toLowerCase()}`:a=`b${o}`),this.squares[i*8+r]=a}}}getFen(){let e=new Array(8).fill("");for(let s=0;s<8;s++){let i=0;for(let n=0;n<8;n++){const r=this.squares[s*8+n];if(!r)i++;else{i>0&&(e[7-s]+=i,i=0);const o=r.substring(0,1),a=r.substring(1,2);o==="w"?e[7-s]+=a.toUpperCase():e[7-s]+=a}}i>0&&(e[7-s]+=i,i=0)}return e.join("/")}getPieces(e=void 0,s=void 0,i=["k","q","r","b","n","p"]){const n=[],r=(o,a)=>i.indexOf(o.name)-i.indexOf(a.name);for(let o=0;o<64;o++){const a=this.squares[o];if(a){const l=a.charAt(1),f=a.charAt(0),u=te.indexToSquare(o);if(s&&s!==l||e&&e!==f)continue;n.push({name:l,type:l,color:f,position:u,square:u})}}return i&&n.sort(r),n}movePiece(e,s){if(!this.squares[te.squareToIndex(e)]){console.warn("no piece on",e);return}this.squares[te.squareToIndex(s)]=this.squares[te.squareToIndex(e)],this.squares[te.squareToIndex(e)]=null}setPiece(e,s){this.squares[te.squareToIndex(e)]=s}getPiece(e){return this.squares[te.squareToIndex(e)]}static squareToIndex(e){const s=te.squareToCoordinates(e);return s[0]+s[1]*8}static indexToSquare(e){return this.coordinatesToSquare([Math.floor(e%8),e/8])}static squareToCoordinates(e){const s=e.charCodeAt(0)-97,i=e.charCodeAt(1)-49;return[s,i]}static coordinatesToSquare(e){const s=String.fromCharCode(e[0]+97),i=String.fromCharCode(e[1]+49);return s+i}toString(){return this.getFen()}clone(){const e=new te;return e.squares=this.squares.slice(0),e}}class hu{constructor(){this.position=new te,this.orientation=void 0,this.inputWhiteEnabled=!1,this.inputBlackEnabled=!1,this.squareSelectEnabled=!1,this.moveInputCallback=null,this.extensionPoints={},this.moveInputProcess=Promise.resolve()}inputEnabled(){return this.inputWhiteEnabled||this.inputBlackEnabled}invokeExtensionPoints(e,s={}){const i=this.extensionPoints[e],n=Object.assign({},s);n.extensionPoint=e;let r=!0;if(i)for(const o of i)o(n)===!1&&(r=!1);return r}}const ir="http://www.w3.org/2000/svg";class J{static createSvg(e=void 0){let s=document.createElementNS(ir,"svg");return e&&(s.setAttribute("width","100%"),s.setAttribute("height","100%"),e.appendChild(s)),s}static addElement(e,s,i={}){let n=document.createElementNS(ir,s);s==="use"&&(i["xlink:href"]=i.href);for(let r in i)if(i.hasOwnProperty(r))if(r.indexOf(":")!==-1){const o=r.split(":");n.setAttributeNS("http://www.w3.org/1999/"+o[0],o[1],i[r])}else n.setAttribute(r,i[r]);return e.appendChild(n),n}static removeElement(e){if(!e){console.warn("removeElement, element is",e);return}e.parentNode?e.parentNode.removeChild(e):console.warn(e,"without parentNode")}}const oe={positionChanged:"positionChanged",boardChanged:"boardChanged",moveInputToggled:"moveInputToggled",moveInput:"moveInput",beforeRedrawBoard:"beforeRedrawBoard",afterRedrawBoard:"afterRedrawBoard",redrawBoard:"redrawBoard",animation:"animation",destroy:"destroy"};class Bt{static delegate(e,s,i,n){const r=function(o){let a=o.target;for(;a&&a!==this;)a.matches(i)&&n.call(a,o),a=a.parentNode};return e.addEventListener(s,r),{remove:function(){e.removeEventListener(s,r)}}}static mergeObjects(e,s){const i=n=>n&&typeof n=="object";if(!i(e)||!i(s))return s;for(const n of Object.keys(s))s[n]instanceof Object&&Object.assign(s[n],Bt.mergeObjects(e[n],s[n]));return Object.assign(e||{},s),e}static createDomElement(e){const s=document.createElement("template");return s.innerHTML=e.trim(),s.content.firstChild}static createTask(){let e,s;const i=new Promise(function(n,r){e=n,s=r});return i.resolve=e,i.reject=s,i}static isAbsoluteUrl(e){return e.indexOf("://")!==-1||e.startsWith("/")}}const Si={start:"start",frame:"frame",end:"end"};class fu{constructor(){this.queue=[],this.workingOnPromise=!1,this.stop=!1}async enqueue(e){return new Promise((s,i)=>{this.queue.push({promise:e,resolve:s,reject:i}),this.dequeue()})}dequeue(){if(this.workingOnPromise)return;if(this.stop){this.queue=[],this.stop=!1;return}const e=this.queue.shift();if(e){try{this.workingOnPromise=!0,e.promise().then(s=>{this.workingOnPromise=!1,e.resolve(s),this.dequeue()}).catch(s=>{this.workingOnPromise=!1,e.reject(s),this.dequeue()})}catch(s){this.workingOnPromise=!1,e.reject(s),this.dequeue()}return!0}}destroy(){this.stop=!0}}const Ue={move:0,appear:1,disappear:2};class qt{constructor(e,s,i,n,r){this.view=e,s&&i?(this.animatedElements=this.createAnimation(s.squares,i.squares),this.duration=n,this.callback=r,this.frameHandle=requestAnimationFrame(this.animationStep.bind(this))):console.error("fromPosition",s,"toPosition",i),this.view.positionsAnimationTask=Bt.createTask(),this.view.chessboard.state.invokeExtensionPoints(oe.animation,{type:Si.start})}static seekChanges(e,s){const i=[],n=[],r=[];for(let o=0;o<64;o++){const a=e[o],l=s[o];l!==a&&(l&&i.push({piece:l,index:o}),a&&n.push({piece:a,index:o}))}return i.forEach(o=>{let a=8,l=null;n.forEach(f=>{if(o.piece===f.piece){const u=qt.squareDistance(o.index,f.index);u<a&&(l=f,a=u)}}),l?(n.splice(n.indexOf(l),1),r.push({type:Ue.move,piece:o.piece,atIndex:l.index,toIndex:o.index})):r.push({type:Ue.appear,piece:o.piece,atIndex:o.index})}),n.forEach(o=>{r.push({type:Ue.disappear,piece:o.piece,atIndex:o.index})}),r}createAnimation(e,s){const i=qt.seekChanges(e,s),n=[];return i.forEach(r=>{const o={type:r.type};switch(r.type){case Ue.move:o.element=this.view.getPieceElement(te.indexToSquare(r.atIndex)),o.element.parentNode.appendChild(o.element),o.atPoint=this.view.indexToPoint(r.atIndex),o.toPoint=this.view.indexToPoint(r.toIndex);break;case Ue.appear:o.element=this.view.drawPieceOnSquare(te.indexToSquare(r.atIndex),r.piece),o.element.style.opacity=0;break;case Ue.disappear:o.element=this.view.getPieceElement(te.indexToSquare(r.atIndex));break}n.push(o)}),n}animationStep(e){if(!this.view||!this.view.chessboard.state)return;this.startTime||(this.startTime=e);const s=e-this.startTime;if(s<=this.duration)this.frameHandle=requestAnimationFrame(this.animationStep.bind(this));else{cancelAnimationFrame(this.frameHandle),this.animatedElements.forEach(r=>{r.type===Ue.disappear&&J.removeElement(r.element)}),this.view.positionsAnimationTask.resolve(),this.view.chessboard.state.invokeExtensionPoints(oe.animation,{type:Si.end}),this.callback();return}const i=Math.min(1,s/this.duration);let n=i<.5?2*i*i:-1+(4-2*i)*i;(isNaN(n)||n>.99)&&(n=1),this.animatedElements.forEach(r=>{if(r.element)switch(r.type){case Ue.move:r.element.transform.baseVal.removeItem(0);const o=this.view.svg.createSVGTransform();o.setTranslate(r.atPoint.x+(r.toPoint.x-r.atPoint.x)*n,r.atPoint.y+(r.toPoint.y-r.atPoint.y)*n),r.element.transform.baseVal.appendItem(o);break;case Ue.appear:r.element.style.opacity=Math.round(n*100)/100;break;case Ue.disappear:r.element.style.opacity=Math.round((1-n)*100)/100;break}else console.warn("animatedItem has no element",r)}),this.view.chessboard.state.invokeExtensionPoints(oe.animation,{type:Si.frame,progress:n})}static squareDistance(e,s){const i=e%8,n=Math.floor(e/8),r=s%8,o=Math.floor(s/8);return Math.max(Math.abs(o-n),Math.abs(r-i))}}class du extends fu{constructor(e){super(),this.chessboard=e}async enqueuePositionChange(e,s,i){return e.getFen()===s.getFen()?Promise.resolve():super.enqueue(()=>new Promise(n=>{let r=i?this.chessboard.props.style.animationDuration:0;this.queue.length>0&&(r=r/(1+Math.pow(this.queue.length/5,2))),new qt(this.chessboard.view,e,s,i?r:0,()=>{this.chessboard.view&&this.chessboard.view.redrawPieces(s.squares),n()})}))}async enqueueTurnBoard(e,s,i){return super.enqueue(()=>new Promise(n=>{const r=new te(Fs.empty);let o=i?this.chessboard.props.style.animationDuration:0;this.queue.length>0&&(o=o/(1+Math.pow(this.queue.length/5,2))),new qt(this.chessboard.view,e,r,i?o:0,()=>{this.chessboard.state.orientation=s,this.chessboard.view.redrawBoard(),this.chessboard.view.redrawPieces(r.squares),new qt(this.chessboard.view,r,e,i?o:0,()=>{this.chessboard.view.redrawPieces(e.squares),n()})})}))}}const P={waitForInputStart:"waitForInputStart",pieceClickedThreshold:"pieceClickedThreshold",clickTo:"clickTo",secondClickThreshold:"secondClickThreshold",dragTo:"dragTo",clickDragTo:"clickDragTo",moveDone:"moveDone",reset:"reset"},jt={secondClick:"secondClick",secondaryClick:"secondaryClick",movedOutOfBoard:"movedOutOfBoard",draggedBack:"draggedBack",clickedAnotherPiece:"clickedAnotherPiece"},nr=4;class pu{constructor(e){this.view=e,this.chessboard=e.chessboard,this.moveInputState=null,this.fromSquare=null,this.toSquare=null,this.setMoveInputState(P.waitForInputStart)}moveInputStartedCallback(e){const s=this.view.moveInputStartedCallback(e);return s&&(this.chessboard.state.moveInputProcess=Bt.createTask(),this.chessboard.state.moveInputProcess.then(i=>{(this.moveInputState===P.waitForInputStart||this.moveInputState===P.moveDone)&&this.view.moveInputFinishedCallback(this.fromSquare,this.toSquare,i)})),s}movingOverSquareCallback(e,s){this.view.movingOverSquareCallback(e,s)}validateMoveInputCallback(e,s){const i=this.view.validateMoveInputCallback(e,s);return this.chessboard.state.moveInputProcess.resolve(i),i}moveInputCanceledCallback(e,s,i){this.view.moveInputCanceledCallback(e,s,i),this.chessboard.state.moveInputProcess.resolve()}setMoveInputState(e,s=void 0){const i=this.moveInputState;switch(this.moveInputState=e,e){case P.waitForInputStart:break;case P.pieceClickedThreshold:if(P.waitForInputStart!==i&&P.clickTo!==i)throw new Error("moveInputState");if(this.pointerMoveListener&&(removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=null),this.pointerUpListener&&(removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=null),this.fromSquare=s.square,this.toSquare=null,this.movedPiece=s.piece,this.startPoint=s.point,!this.pointerMoveListener&&!this.pointerUpListener){if(s.type==="mousedown")this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="mousemove",addEventListener("mousemove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="mouseup",addEventListener("mouseup",this.pointerUpListener);else if(s.type==="touchstart")this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="touchmove",addEventListener("touchmove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="touchend",addEventListener("touchend",this.pointerUpListener);else throw Error("4b74af");this.contextMenuListener||(this.contextMenuListener=this.onContextMenu.bind(this),this.chessboard.view.svg.addEventListener("contextmenu",this.contextMenuListener))}else throw Error("94ad0c");break;case P.clickTo:this.draggablePiece&&(J.removeElement(this.draggablePiece),this.draggablePiece=null),i===P.dragTo&&this.view.setPieceVisibility(s.square,!0);break;case P.secondClickThreshold:if(P.clickTo!==i)throw new Error("moveInputState");this.startPoint=s.point;break;case P.dragTo:if(P.pieceClickedThreshold!==i)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled()&&(this.view.setPieceVisibility(s.square,!1),this.createDraggablePiece(s.piece));break;case P.clickDragTo:if(P.secondClickThreshold!==i)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled()&&(this.view.setPieceVisibility(s.square,!1),this.createDraggablePiece(s.piece));break;case P.moveDone:if([P.dragTo,P.clickTo,P.clickDragTo].indexOf(i)===-1)throw new Error("moveInputState");this.toSquare=s.square,this.toSquare&&this.validateMoveInputCallback(this.fromSquare,this.toSquare)?this.chessboard.movePiece(this.fromSquare,this.toSquare,i===P.clickTo).then(()=>{i===P.clickTo&&this.view.setPieceVisibility(this.toSquare,!0),this.setMoveInputState(P.reset)}):(this.view.setPieceVisibility(this.fromSquare,!0),this.setMoveInputState(P.reset));break;case P.reset:this.fromSquare&&!this.toSquare&&this.movedPiece&&this.chessboard.state.position.setPiece(this.fromSquare,this.movedPiece),this.fromSquare=null,this.toSquare=null,this.movedPiece=null,this.draggablePiece&&(J.removeElement(this.draggablePiece),this.draggablePiece=null),this.pointerMoveListener&&(removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=null),this.pointerUpListener&&(removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=null),this.contextMenuListener&&(removeEventListener("contextmenu",this.contextMenuListener),this.contextMenuListener=null),this.setMoveInputState(P.waitForInputStart);const n=this.view.piecesGroup.querySelectorAll("[visibility=hidden]");for(let r=0;r<n.length;r++)n[r].removeAttribute("visibility");break;default:throw Error(`260b09: moveInputState ${e}`)}}createDraggablePiece(e){if(this.draggablePiece)throw Error("draggablePiece already exists");this.draggablePiece=J.createSvg(document.body),this.draggablePiece.classList.add("cm-chessboard-draggable-piece"),this.draggablePiece.setAttribute("width",this.view.squareWidth),this.draggablePiece.setAttribute("height",this.view.squareHeight),this.draggablePiece.setAttribute("style","pointer-events: none"),this.draggablePiece.name=e;const s=this.chessboard.props.assetsCache?"":this.view.getSpriteUrl(),i=J.addElement(this.draggablePiece,"use",{href:`${s}#${e}`}),n=this.view.squareHeight/this.chessboard.props.style.pieces.tileSize,r=this.draggablePiece.createSVGTransform();r.setScale(n,n),i.transform.baseVal.appendItem(r)}moveDraggablePiece(e,s){this.draggablePiece.setAttribute("style",`pointer-events: none; position: absolute; left: ${e-this.view.squareHeight/2}px; top: ${s-this.view.squareHeight/2}px`)}onPointerDown(e){if(!(e.type==="mousedown"&&e.button===0||e.type==="touchstart"))return;const s=e.target.getAttribute("data-square");if(!s)return;const i=this.chessboard.getPiece(s);let n;if(i&&(n=i?i.substring(0,1):null,(n==="w"&&this.chessboard.state.inputWhiteEnabled||n==="b"&&this.chessboard.state.inputBlackEnabled)&&e.preventDefault()),this.moveInputState!==P.waitForInputStart||this.chessboard.state.inputWhiteEnabled&&n==="w"||this.chessboard.state.inputBlackEnabled&&n==="b"){let r;if(e.type==="mousedown"?r={x:e.clientX,y:e.clientY}:e.type==="touchstart"&&(r={x:e.touches[0].clientX,y:e.touches[0].clientY}),this.moveInputState===P.waitForInputStart&&i&&this.moveInputStartedCallback(s))this.setMoveInputState(P.pieceClickedThreshold,{square:s,piece:i,point:r,type:e.type});else if(this.moveInputState===P.clickTo)if(s===this.fromSquare)this.setMoveInputState(P.secondClickThreshold,{square:s,piece:i,point:r,type:e.type});else{const o=this.chessboard.getPiece(s),a=o?o.substring(0,1):null,l=this.chessboard.getPiece(this.fromSquare),f=l?l.substring(0,1):null;n&&f===a?(this.moveInputCanceledCallback(this.fromSquare,s,jt.clickedAnotherPiece),this.moveInputStartedCallback(s)?this.setMoveInputState(P.pieceClickedThreshold,{square:s,piece:o,point:r,type:e.type}):this.setMoveInputState(P.reset)):this.setMoveInputState(P.moveDone,{square:s})}}}onPointerMove(e){let s,i,n,r,o;if(e.type==="mousemove"?(n=e.clientX,r=e.clientY,s=e.pageX,i=e.pageY,o=e.target):e.type==="touchmove"&&(n=e.touches[0].clientX,r=e.touches[0].clientY,s=e.touches[0].pageX,i=e.touches[0].pageY,o=document.elementFromPoint(n,r)),this.moveInputState===P.pieceClickedThreshold||this.moveInputState===P.secondClickThreshold)(Math.abs(this.startPoint.x-n)>nr||Math.abs(this.startPoint.y-r)>nr)&&(this.moveInputState===P.secondClickThreshold?this.setMoveInputState(P.clickDragTo,{square:this.fromSquare,piece:this.movedPiece}):this.setMoveInputState(P.dragTo,{square:this.fromSquare,piece:this.movedPiece}),this.view.chessboard.state.inputEnabled()&&this.moveDraggablePiece(s,i));else if(this.moveInputState===P.dragTo||this.moveInputState===P.clickDragTo||this.moveInputState===P.clickTo){if(o&&o.getAttribute&&o.parentElement===this.view.boardGroup){const a=o.getAttribute("data-square");a!==this.fromSquare&&a!==this.toSquare?(this.toSquare=a,this.movingOverSquareCallback(this.fromSquare,this.toSquare)):a===this.fromSquare&&this.toSquare!==null&&(this.toSquare=null,this.movingOverSquareCallback(this.fromSquare,null))}else this.toSquare!==null&&(this.toSquare=null,this.movingOverSquareCallback(this.fromSquare,null));this.view.chessboard.state.inputEnabled()&&(this.moveInputState===P.dragTo||this.moveInputState===P.clickDragTo)&&this.moveDraggablePiece(s,i)}}onPointerUp(e){let s;if(e.type==="mouseup"?s=e.target:e.type==="touchend"&&(s=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)),s&&s.getAttribute){const i=s.getAttribute("data-square");if(i)this.moveInputState===P.dragTo||this.moveInputState===P.clickDragTo?this.fromSquare===i?this.moveInputState===P.clickDragTo?(this.chessboard.state.position.setPiece(this.fromSquare,this.movedPiece),this.view.setPieceVisibility(this.fromSquare),this.moveInputCanceledCallback(i,null,jt.draggedBack),this.setMoveInputState(P.reset)):this.setMoveInputState(P.clickTo,{square:i}):this.setMoveInputState(P.moveDone,{square:i}):this.moveInputState===P.pieceClickedThreshold?this.setMoveInputState(P.clickTo,{square:i}):this.moveInputState===P.secondClickThreshold&&(this.setMoveInputState(P.reset),this.moveInputCanceledCallback(i,null,jt.secondClick));else{this.view.redrawPieces();const n=this.fromSquare;this.setMoveInputState(P.reset),this.moveInputCanceledCallback(n,null,jt.movedOutOfBoard)}}else this.view.redrawPieces(),this.setMoveInputState(P.reset)}onContextMenu(e){e.preventDefault(),this.view.redrawPieces(),this.setMoveInputState(P.reset),this.moveInputCanceledCallback(this.fromSquare,null,jt.secondaryClick)}isDragging(){return this.moveInputState===P.dragTo||this.moveInputState===P.clickDragTo}destroy(){this.setMoveInputState(P.reset)}}const vt={white:"w",black:"b"},Wt={moveInputStarted:"moveInputStarted",movingOverSquare:"movingOverSquare",validateMoveInput:"validateMoveInput",moveInputCanceled:"moveInputCanceled",moveInputFinished:"moveInputFinished"},gu={pointercancel:"pointercancel",pointerdown:"pointerdown",pointerenter:"pointerenter",pointerleave:"pointerleave",pointermove:"pointermove",pointerout:"pointerout",pointerover:"pointerover",pointerup:"pointerup"},Pt={none:"none",thin:"thin",frame:"frame"};class mu{constructor(e){this.chessboard=e,this.visualMoveInput=new pu(this),e.props.assetsCache&&this.cacheSpriteToDiv("cm-chessboard-sprite",this.getSpriteUrl()),this.container=document.createElement("div"),this.chessboard.context.appendChild(this.container),e.props.responsive&&(typeof ResizeObserver<"u"?(this.resizeObserver=new ResizeObserver(()=>{setTimeout(()=>{this.handleResize()})}),this.resizeObserver.observe(this.chessboard.context)):(this.resizeListener=this.handleResize.bind(this),window.addEventListener("resize",this.resizeListener))),this.positionsAnimationTask=Promise.resolve(),this.pointerDownListener=this.pointerDownHandler.bind(this),this.container.addEventListener("mousedown",this.pointerDownListener),this.container.addEventListener("touchstart",this.pointerDownListener,{passive:!1}),this.createSvgAndGroups(),this.handleResize()}pointerDownHandler(e){this.visualMoveInput.onPointerDown(e)}destroy(){this.visualMoveInput.destroy(),this.resizeObserver&&this.resizeObserver.unobserve(this.chessboard.context),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),this.chessboard.context.removeEventListener("mousedown",this.pointerDownListener),this.chessboard.context.removeEventListener("touchstart",this.pointerDownListener),J.removeElement(this.svg),this.container.remove()}cacheSpriteToDiv(e,s){if(!document.getElementById(e)){const i=document.createElement("div");i.style.transform="scale(0)",i.style.position="absolute",i.setAttribute("aria-hidden","true"),i.id=e,document.body.appendChild(i);const n=new XMLHttpRequest;n.open("GET",s,!0),n.onload=function(){i.insertAdjacentHTML("afterbegin",n.response)},n.send()}}createSvgAndGroups(){this.svg=J.createSvg(this.container);let e=this.chessboard.props.style.cssClass?this.chessboard.props.style.cssClass:"default";this.svg.setAttribute("class","cm-chessboard border-type-"+this.chessboard.props.style.borderType+" "+e),this.svg.setAttribute("role","img"),this.updateMetrics(),this.boardGroup=J.addElement(this.svg,"g",{class:"board"}),this.coordinatesGroup=J.addElement(this.svg,"g",{class:"coordinates","aria-hidden":"true"}),this.markersLayer=J.addElement(this.svg,"g",{class:"markers-layer"}),this.piecesLayer=J.addElement(this.svg,"g",{class:"pieces-layer"}),this.piecesGroup=J.addElement(this.piecesLayer,"g",{class:"pieces"}),this.markersTopLayer=J.addElement(this.svg,"g",{class:"markers-top-layer"}),this.interactiveTopLayer=J.addElement(this.svg,"g",{class:"interactive-top-layer"})}updateMetrics(){const e=this.chessboard.props.style.pieces.tileSize;this.width=this.container.clientWidth,this.height=this.container.clientWidth*(this.chessboard.props.style.aspectRatio||1),this.chessboard.props.style.borderType===Pt.frame?this.borderSize=this.width/25:this.chessboard.props.style.borderType===Pt.thin?this.borderSize=this.width/320:this.borderSize=0,this.innerWidth=this.width-2*this.borderSize,this.innerHeight=this.height-2*this.borderSize,this.squareWidth=this.innerWidth/8,this.squareHeight=this.innerHeight/8,this.scalingX=this.squareWidth/e,this.scalingY=this.squareHeight/e,this.pieceXTranslate=this.squareWidth/2-e*this.scalingY/2}handleResize(){this.container.style.width=this.chessboard.context.clientWidth+"px",this.container.style.height=this.chessboard.context.clientWidth*this.chessboard.props.style.aspectRatio+"px",(this.container.clientWidth!==this.width||this.container.clientHeight!==this.height)&&(this.updateMetrics(),this.redrawBoard(),this.redrawPieces()),this.svg.setAttribute("width","100%"),this.svg.setAttribute("height","100%")}redrawBoard(){this.chessboard.state.invokeExtensionPoints(oe.beforeRedrawBoard),this.redrawSquares(),this.drawCoordinates(),this.chessboard.state.invokeExtensionPoints(oe.afterRedrawBoard),this.visualizeInputState()}redrawSquares(){for(;this.boardGroup.firstChild;)this.boardGroup.removeChild(this.boardGroup.lastChild);if(J.addElement(this.boardGroup,"rect",{width:this.width,height:this.height}).setAttribute("class","border"),this.chessboard.props.style.borderType===Pt.frame){const s=this.borderSize;J.addElement(this.boardGroup,"rect",{x:s,y:s,width:this.width-s*2,height:this.height-s*2}).setAttribute("class","border-inner")}for(let s=0;s<64;s++){const i=this.chessboard.state.orientation===vt.white?s:63-s,r=`square ${9*i&8?"white":"black"}`,o=this.squareToPoint(te.indexToSquare(i)),a=J.addElement(this.boardGroup,"rect",{x:o.x,y:o.y,width:this.squareWidth,height:this.squareHeight});a.setAttribute("class",r),a.setAttribute("data-square",te.indexToSquare(i))}}drawCoordinates(){if(!this.chessboard.props.style.showCoordinates)return;for(;this.coordinatesGroup.firstChild;)this.coordinatesGroup.removeChild(this.coordinatesGroup.lastChild);const e=this.chessboard.props.style.borderType!==Pt.frame;for(let s=0;s<8;s++){let i=this.borderSize+(17+this.chessboard.props.style.pieces.tileSize*s)*this.scalingX,n=this.height-this.scalingY*3.5,r="coordinate file";e&&(i=i+this.scalingX*15.5,r+=s%2?" white":" black");const o=J.addElement(this.coordinatesGroup,"text",{class:r,x:i,y:n,style:`font-size: ${this.scalingY*10}px`});this.chessboard.state.orientation===vt.white?o.textContent=String.fromCharCode(97+s):o.textContent=String.fromCharCode(104-s)}for(let s=0;s<8;s++){let i=this.borderSize/3.7,n=this.borderSize+25*this.scalingY+s*this.squareHeight,r="coordinate rank";e&&(r+=s%2?" black":" white",this.chessboard.props.style.borderType===Pt.frame?(i=i+this.scalingX*10,n=n-this.scalingY*15):(i=i+this.scalingX*2,n=n-this.scalingY*15));const o=J.addElement(this.coordinatesGroup,"text",{class:r,x:i,y:n,style:`font-size: ${this.scalingY*10}px`});this.chessboard.state.orientation===vt.white?o.textContent=""+(8-s):o.textContent=""+(1+s)}}redrawPieces(e=this.chessboard.state.position.squares){const s=Array.from(this.piecesGroup.childNodes),i=this.visualMoveInput.isDragging();for(let n=0;n<64;n++){const r=e[n];if(r){const o=te.indexToSquare(n);this.drawPieceOnSquare(o,r,i&&o===this.visualMoveInput.fromSquare)}}for(const n of s)this.piecesGroup.removeChild(n)}drawPiece(e,s,i){const n=J.addElement(e,"g",{});n.setAttribute("data-piece",s);const r=this.svg.createSVGTransform();r.setTranslate(i.x,i.y),n.transform.baseVal.appendItem(r);const o=this.chessboard.props.assetsCache?"":this.getSpriteUrl(),a=J.addElement(n,"use",{href:`${o}#${s}`,class:"piece"}),l=this.svg.createSVGTransform();return l.setScale(this.scalingY,this.scalingY),a.transform.baseVal.appendItem(l),n}drawPieceOnSquare(e,s,i=!1){const n=J.addElement(this.piecesGroup,"g",{});n.setAttribute("data-piece",s),n.setAttribute("data-square",e),i&&n.setAttribute("visibility","hidden");const r=this.squareToPoint(e),o=this.svg.createSVGTransform();o.setTranslate(r.x,r.y),n.transform.baseVal.appendItem(o);const a=this.chessboard.props.assetsCache?"":this.getSpriteUrl(),l=J.addElement(n,"use",{href:`${a}#${s}`,class:"piece"}),f=this.svg.createSVGTransform();f.setTranslate(this.pieceXTranslate,0),l.transform.baseVal.appendItem(f);const u=this.svg.createSVGTransform();return u.setScale(this.scalingY,this.scalingY),l.transform.baseVal.appendItem(u),n}setPieceVisibility(e,s=!0){const i=this.getPieceElement(e);i?s?i.setAttribute("visibility","visible"):i.setAttribute("visibility","hidden"):console.warn("no piece on",e)}getPieceElement(e){if(!e||e.length<2)return console.warn("invalid square",e),null;const s=this.piecesGroup.querySelector(`g[data-square='${e}']`);return s||(console.warn("no piece on",e),null)}enableMoveInput(e,s=null){if(this.chessboard.state.moveInputCallback)throw Error("moveInput already enabled");s===vt.white?this.chessboard.state.inputWhiteEnabled=!0:s===vt.black?this.chessboard.state.inputBlackEnabled=!0:(this.chessboard.state.inputWhiteEnabled=!0,this.chessboard.state.inputBlackEnabled=!0),this.chessboard.state.moveInputCallback=e,this.chessboard.state.invokeExtensionPoints(oe.moveInputToggled,{enabled:!0,color:s}),this.visualizeInputState()}disableMoveInput(){this.chessboard.state.inputWhiteEnabled=!1,this.chessboard.state.inputBlackEnabled=!1,this.chessboard.state.moveInputCallback=null,this.chessboard.state.invokeExtensionPoints(oe.moveInputToggled,{enabled:!1}),this.visualizeInputState()}moveInputStartedCallback(e){const s={chessboard:this.chessboard,type:Wt.moveInputStarted,square:e,squareFrom:e,piece:this.chessboard.getPiece(e)};return this.chessboard.state.moveInputCallback&&(s.moveInputCallbackResult=this.chessboard.state.moveInputCallback(s)),this.chessboard.state.invokeExtensionPoints(oe.moveInput,s),s.moveInputCallbackResult}movingOverSquareCallback(e,s){const i={chessboard:this.chessboard,type:Wt.movingOverSquare,squareFrom:e,squareTo:s,piece:this.chessboard.getPiece(e)};this.chessboard.state.moveInputCallback&&(i.moveInputCallbackResult=this.chessboard.state.moveInputCallback(i)),this.chessboard.state.invokeExtensionPoints(oe.moveInput,i)}validateMoveInputCallback(e,s){const i={chessboard:this.chessboard,type:Wt.validateMoveInput,squareFrom:e,squareTo:s,piece:this.chessboard.getPiece(e)};return this.chessboard.state.moveInputCallback&&(i.moveInputCallbackResult=this.chessboard.state.moveInputCallback(i)),this.chessboard.state.invokeExtensionPoints(oe.moveInput,i),i.moveInputCallbackResult}moveInputCanceledCallback(e,s,i){const n={chessboard:this.chessboard,type:Wt.moveInputCanceled,reason:i,squareFrom:e,squareTo:s};this.chessboard.state.moveInputCallback&&this.chessboard.state.moveInputCallback(n),this.chessboard.state.invokeExtensionPoints(oe.moveInput,n)}moveInputFinishedCallback(e,s,i){const n={chessboard:this.chessboard,type:Wt.moveInputFinished,squareFrom:e,squareTo:s,legalMove:i};this.chessboard.state.moveInputCallback&&this.chessboard.state.moveInputCallback(n),this.chessboard.state.invokeExtensionPoints(oe.moveInput,n)}visualizeInputState(){this.chessboard.state&&(this.chessboard.state.inputWhiteEnabled||this.chessboard.state.inputBlackEnabled?this.boardGroup.setAttribute("class","board input-enabled"):this.boardGroup.setAttribute("class","board"))}indexToPoint(e){let s,i;return this.chessboard.state.orientation===vt.white?(s=this.borderSize+e%8*this.squareWidth,i=this.borderSize+(7-Math.floor(e/8))*this.squareHeight):(s=this.borderSize+(7-e%8)*this.squareWidth,i=this.borderSize+Math.floor(e/8)*this.squareHeight),{x:s,y:i}}squareToPoint(e){const s=te.squareToIndex(e);return this.indexToPoint(s)}getSpriteUrl(){return Bt.isAbsoluteUrl(this.chessboard.props.style.pieces.file)?this.chessboard.props.style.pieces.file:this.chessboard.props.assetsUrl+this.chessboard.props.style.pieces.file}}const bu={svgSprite:"svgSprite"};class _u{constructor(e,s={}){if(!e)throw new Error("container element is "+e);this.context=e,this.id=(Math.random()+1).toString(36).substring(2,8),this.extensions=[],this.props={position:Fs.empty,orientation:vt.white,responsive:!0,assetsUrl:"./assets/",assetsCache:!0,style:{cssClass:"default",showCoordinates:!0,borderType:Pt.none,aspectRatio:1,pieces:{type:bu.svgSprite,file:"pieces/standard.svg",tileSize:40},animationDuration:300},extensions:[]},Bt.mergeObjects(this.props,s),this.state=new hu,this.view=new mu(this),this.positionAnimationsQueue=new du(this),this.state.orientation=this.props.orientation;for(const i of this.props.extensions)this.addExtension(i.class,i.props);this.view.redrawBoard(),this.state.position=new te(this.props.position),this.view.redrawPieces(),this.state.invokeExtensionPoints(oe.positionChanged),this.initialized=Promise.resolve()}async setPiece(e,s,i=!1){const n=this.state.position.clone();return this.state.position.setPiece(e,s),this.state.invokeExtensionPoints(oe.positionChanged),this.positionAnimationsQueue.enqueuePositionChange(n,this.state.position.clone(),i)}async movePiece(e,s,i=!1){const n=this.state.position.clone();return this.state.position.movePiece(e,s),this.state.invokeExtensionPoints(oe.positionChanged),this.positionAnimationsQueue.enqueuePositionChange(n,this.state.position.clone(),i)}async setPosition(e,s=!1){const i=this.state.position.clone(),n=new te(e);return i.getFen()!==n.getFen()&&(this.state.position.setFen(e),this.state.invokeExtensionPoints(oe.positionChanged)),this.positionAnimationsQueue.enqueuePositionChange(i,this.state.position.clone(),s)}async setOrientation(e,s=!1){const i=this.state.position.clone();if(this.boardTurning){console.warn("setOrientation is only once in queue allowed");return}return this.boardTurning=!0,this.positionAnimationsQueue.enqueueTurnBoard(i,e,s).then(()=>{this.boardTurning=!1,this.state.invokeExtensionPoints(oe.boardChanged)})}getPiece(e){return this.state.position.getPiece(e)}getPosition(){return this.state.position.getFen()}getOrientation(){return this.state.orientation}enableMoveInput(e,s=void 0){this.view.enableMoveInput(e,s)}disableMoveInput(){this.view.disableMoveInput()}isMoveInputEnabled(){return this.state.inputWhiteEnabled||this.state.inputBlackEnabled}enableSquareSelect(e=gu.pointerdown,s){this.squareSelectListener||(this.squareSelectListener=function(i){const n=i.target.getAttribute("data-square");s({eventType:i.type,event:i,chessboard:this,square:n})}),this.context.addEventListener(e,this.squareSelectListener),this.state.squareSelectEnabled=!0,this.view.visualizeInputState()}disableSquareSelect(e){this.context.removeEventListener(e,this.squareSelectListener),this.squareSelectListener=void 0,this.state.squareSelectEnabled=!1,this.view.visualizeInputState()}isSquareSelectEnabled(){return this.state.squareSelectEnabled}addExtension(e,s){if(this.getExtension(e))throw Error('extension "'+e.name+'" already added');this.extensions.push(new e(this,s))}getExtension(e){for(const s of this.extensions)if(s instanceof e)return s;return null}destroy(){this.state.invokeExtensionPoints(oe.destroy),this.positionAnimationsQueue.destroy(),this.view.destroy(),this.view=void 0,this.state=void 0}}const dn=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},vu={name:"ChessBoard",props:{gameId:String,whitePlayer:Object,blackPlayer:Object,currentTurn:String,userColor:String,socket:Object,initialFen:String},data(){return{chessboard:null,chess:null,gameStatus:null}},mounted(){this.initializeBoard(),this.setupSocketListeners()},methods:{initializeBoard(){this.chess=new uu,this.initialFen&&this.chess.load(this.initialFen),this.chessboard=new _u(this.$refs.boardElement,{position:this.chess.fen(),orientation:this.userColor||"white",style:{borderType:"thin",aspectRatio:1,pieces:{file:"staunty.svg"}},sprite:{url:"./node_modules/cm-chessboard/assets/pieces/staunty.svg"}}),this.chessboard.enableMoveInput(t=>this.handleMove(t),this.userColor)},handleMove(t){if(this.currentTurn!==this.userColor)return!1;const e={from:t.squareFrom,to:t.squareTo,promotion:"q"};try{const s=this.chess.move(e);if(s)return this.socket.emit("make_move",{game_id:this.gameId,user_id:this.getUserId(),move:s.from+s.to+(s.promotion||"")}),!0}catch(s){console.error("Invalid move:",s)}return!1},setupSocketListeners(){this.socket.on("move_made",t=>{this.chess.load(t.fen),this.chessboard.setPosition(t.fen),this.$emit("turn-changed",t.turn)}),this.socket.on("game_over",t=>{t.reason==="checkmate"?this.gameStatus=`Checkmate! ${t.winner===this.whitePlayer.id?"White":"Black"} wins!`:t.reason==="stalemate"&&(this.gameStatus="Stalemate! The game is a draw."),this.$emit("game-over",t)})},getUserId(){return localStorage.getItem("user_id")}},beforeUnmount(){this.chessboard&&this.chessboard.destroy()}},yu={class:"chess-board-container"},wu={class:"player-info"},Su={class:"player-name"},Eu={class:"chess-board",ref:"boardElement"},Cu={class:"player-info"},Tu={class:"player-name"},xu={key:0,class:"game-status"};function ku(t,e,s,i,n,r){var o,a;return Ve(),Xe("div",yu,[Z("div",wu,[Z("div",{class:ns(["player",{active:s.currentTurn==="black"}])},[Z("span",Su,Xt(((o=s.blackPlayer)==null?void 0:o.username)||"Black"),1),e[0]||(e[0]=Z("span",{class:"player-color"},"Black",-1))],2)]),Z("div",Eu,null,512),Z("div",Cu,[Z("div",{class:ns(["player",{active:s.currentTurn==="white"}])},[Z("span",Tu,Xt(((a=s.whitePlayer)==null?void 0:a.username)||"White"),1),e[1]||(e[1]=Z("span",{class:"player-color"},"White",-1))],2)]),n.gameStatus?(Ve(),Xe("div",xu,Xt(n.gameStatus),1)):ml("",!0)])}const Pu=dn(vu,[["render",ku],["__scopeId","data-v-4ee68acf"]]);const Au={name:"GameLobby",components:{ChessBoard:Pu},data(){return{username:"",userId:null,isRegistered:!1,isWaiting:!1,gameId:null,whitePlayer:null,blackPlayer:null,currentTurn:"white",userColor:null,socket:null,initialFen:null}},methods:{async register(){if(this.username)try{const e=await(await fetch(`${{}.VUE_APP_API_URL}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username})})).json();this.userId=e.user_id,localStorage.setItem("user_id",e.user_id),localStorage.setItem("username",e.username),this.isRegistered=!0,this.connectSocket()}catch(t){console.error("Registration error:",t)}},connectSocket(){this.socket=Os({}.VUE_APP_API_URL),this.socket.on("connect",()=>{console.log("Connected to server")}),this.socket.on("game_started",t=>{this.gameId=t.game_id,this.whitePlayer=t.white,this.blackPlayer=t.black,this.userColor=t.white.id===this.userId?"white":"black",this.initialFen=t.fen,this.isWaiting=!1}),this.socket.on("waiting_for_opponent",()=>{this.isWaiting=!0}),this.socket.on("error",t=>{console.error("Socket error:",t)})},joinGame(){this.socket.emit("join_game",{user_id:this.userId,username:this.username})},updateTurn(t){this.currentTurn=t},handleGameOver(t){console.log("Game over:",t)}},mounted(){const t=localStorage.getItem("user_id"),e=localStorage.getItem("username");t&&e&&(this.userId=t,this.username=e,this.isRegistered=!0,this.connectSocket())},beforeUnmount(){this.socket&&this.socket.disconnect()}},Iu={class:"game-lobby"},Ou={key:0,class:"registration"},Ru=["disabled"],qu={key:1,class:"waiting"},Lu={key:0},Mu={key:1,class:"waiting-animation"},Nu={key:2,class:"game"};function Bu(t,e,s,i,n,r){const o=Ur("ChessBoard");return Ve(),Xe("div",Iu,[n.isRegistered?n.gameId?(Ve(),Xe("div",Nu,[Ne(o,{"game-id":n.gameId,"white-player":n.whitePlayer,"black-player":n.blackPlayer,"current-turn":n.currentTurn,"user-color":n.userColor,socket:n.socket,"initial-fen":n.initialFen,"show-evaluation":!0,onTurnChanged:r.updateTurn,onGameOver:r.handleGameOver},null,8,["game-id","white-player","black-player","current-turn","user-color","socket","initial-fen","onTurnChanged","onGameOver"])])):(Ve(),Xe("div",qu,[Z("h2",null,"Welcome, "+Xt(n.username)+"!",1),n.isWaiting?(Ve(),Xe("div",Mu,e[5]||(e[5]=[Z("div",{class:"spinner"},null,-1),Z("p",null,"Waiting for opponent...",-1)]))):(Ve(),Xe("div",Lu,[Z("button",{onClick:e[3]||(e[3]=(...a)=>r.joinGame&&r.joinGame(...a)),class:"join-button"},"Find Opponent")]))])):(Ve(),Xe("div",Ou,[e[4]||(e[4]=Z("h2",null,"Welcome to Azure Chess",-1)),va(Z("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.username=a),type:"text",placeholder:"Enter your username",onKeyup:e[1]||(e[1]=Xl((...a)=>r.register&&r.register(...a),["enter"]))},null,544),[[Yl,n.username]]),Z("button",{onClick:e[2]||(e[2]=(...a)=>r.register&&r.register(...a)),disabled:!n.username},"Register",8,Ru)]))])}const Du=dn(Au,[["render",Bu],["__scopeId","data-v-7bb1c8ba"]]);const Fu={name:"App",components:{GameLobby:Du}},Uu={id:"app"};function Hu(t,e,s,i,n,r){const o=Ur("GameLobby");return Ve(),Xe("div",Uu,[e[0]||(e[0]=Z("header",null,[Z("h1",null,"Azure Chess Game")],-1)),Z("main",null,[Ne(o)]),e[1]||(e[1]=Z("footer",null,[Z("p",null,"Created with Azure Services - Bachelor Project")],-1))])}const Vu=dn(Fu,[["render",Hu]]);ec(Vu).mount("#app");
